
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="sKCEBeALSs13uui0cWMviq9hlm0rPByKQKNHnOdq-d0" />
    <meta name="baidu-site-verification" content="code-MBwKQgVpns" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Songtao Gui">

    
    <meta name="description" content="Juliaæ•°æ®ç§‘å­¦ç³»åˆ—-DataFramesåŒ…ç”¨æ³•ã€‚
">
    

    
    
    <meta name="keywords" content="Juliaæ•°æ®ç§‘å­¦ç³»åˆ—-DataFramesåŒ…">
    <title>Juliaæ•°æ®ç§‘å­¦ç³»åˆ—-DataFramesåŒ…</title>
    

    <link rel="icon" href="/assets/favicon.svg">

    <!-- Dark mode -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
    <script>
        function addDarkmodeWidget()
        {
            const options = {
                top: 'unset',
                bottom: 'unset', /* default: '32px' */
                right: 'unset', /* default: '32px' */
                left: '50px', /* default: 'unset' */
                time: '.0s', /* default: '0.3s' */
                mixColor: '#fff', /* default: '#fff' */
                backgroundColor: '#fff', /* default: '#fff' */
                buttonColorDark: '#100f2c', /* default: '#100f2c' */
                buttonColorLight: '#fff', /* default: '#fff' */
                saveInCookies: true, /* default: true, */
                label: 'ğŸŒ“', /* default: '' */
                autoMatchOsTheme: true /* default: true */
            };
            new Darkmode(options).showWidget();
        };
        window.addEventListener('DOMContentLoaded', addDarkmodeWidget);
    </script> -->
    
<link rel=preconnect href="https://fonts.gstatic.com" crossorigin=anonymous>
<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    crossorigin=anonymous>
<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"
    crossorigin=anonymous>
<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" crossorigin=anonymous>
<link rel=stylesheet
    href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"
    crossorigin=anonymous>
<!-- locally served -->
<link rel="stylesheet" href="/css/pure.css">
<link rel=stylesheet href="/libs/academic/academic.min.css">
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/extra.css">
<link rel=stylesheet href="/css/codeset.css">
<link rel=stylesheet href="/css/admonition.css">
<link rel=stylesheet href="/css/cv.css">
<link rel=stylesheet href="/css/search-box.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<link rel=stylesheet href="/css/vega.css">
<!-- <link rel=stylesheet href="/css/font-awesome.css"> -->

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- nutshell + highlight + katex + plotly -->
<script src="/libs/nutshell/nutshell.js"></script>
<link rel=stylesheet href="/libs/highlight/styles/atom-one-light.min.css">






    <!-- Vega -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
    <style media="screen">
        /* Add space between Vega-Embed links  */
        .vega-actions a {
          margin-right: 5px;
        }
    </style>
    <!-- end Vega -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js"
        integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script>
</head>

<body id=top data-spy="scroll" data-offset="70" data-target=#navbar-main>
    <!-- Swiftype -->
    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
        
        _st('install','J57vdqtTa8oYL-ikpKNG','2.0.0');
    </script>
    
     <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main>
    <div class=container>
        <!-- Main name -->
        <div class="d-none d-lg-inline-flex">
            <a class=navbar-brand href="/">Songtao Gui</a>
        </div>
        <!-- Button for narrow mode -->
        <button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar
            aria-expanded=false aria-label="Toggle navigation">
            <span><i class="fas fa-bars"></i></span>
        </button>
        <!-- Main name for mobile mode -->
        <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
            <a class=navbar-brand href="/">Songtao Gui</a>
        </div>
        <!-- Menu items -->
        <div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content>
            <ul class="navbar-nav d-md-inline-flex">
                <li class=nav-item><a class=nav-link href="/posts/"><span>Posts</span></a></li>
                <li class=nav-item><a class=nav-link href="/courses/"><span>Courses</span></a></li>
                <li class=nav-item><a class=nav-link href="/notebooks/"><span>Notebooks</span></a></li>
                <li class=nav-item><a class=nav-link href="/cv/"><span>CurriculumVitae</span></a></li>
                <li class=nav-item><a class=nav-link href="/tag/"><span>Tags</span></a></li>
            </ul>
        </div>
        <!-- <div class="nav-linksmall d-none d-lg-inline-flex inputBox">
                <input type="text" class="st-default-search-input" placeholder="Input then press ENTER" value="" required>
                <div class="search"></div>
            <script>
                var searchForm = document.getElementById('searchForm');
                searchForm.onsubmit = function () {
                    var url = this.action;
                    var q = this.children['q'].value;
                    var q = 'site:songtaogui.github.io+' + q
                    // var site = this.children['site'].value;
                    var url = url + '?q=' + q;
                    window.open(url,'__blank');
                    return false;
                };
            </script>
        </div> -->
        <!-- åŸºäºbing siteæœç´¢: -->
        <div class="nav-linksmall d-none d-lg-inline-flex inputBox">
            <form action="https://bing.com/search" id="searchForm">
                <input type="text" name="q" value="" placeholder="Input then press ENTER" value="" required>
                <div class="search"></div>
            </form>
            <script>
                var searchForm = document.getElementById('searchForm');
                searchForm.onsubmit = function () {
                    var url = this.action;
                    var q = this.children['q'].value;
                    var q = 'site:songtaogui.github.io+' + q
                    // var site = this.children['site'].value;
                    var url = url + '?q=' + q;
                    window.open(url,'__blank');
                    return false;
                };
            </script>
        </div>
        <!-- <div class="nav-icon d-none d-lg-inline-flex"> -->
        <div class="nav-icon">
            <a class=nav-linksmall href="/giants" target="_blank"><span><img class="nav-img"
                src="/assets/img/giant.svg"></span></a>
            <a class=nav-linksmall href="/achievements/" target="_blank"><span><img class="nav-img"
                        src="/assets/img/achievement.svg"></span></a>
            <a class=nav-linksmall href="/feed.xml" target="_blank"><span><img class="nav-img"
                        src="/assets/img/rss.svg"></span></a>
            <a class=nav-linksmall href="/musics" target="_blank"><span><img class="nav-img"
                        src="/assets/img/music.svg"></span></a>
        </div>

    </div>
</nav> 

    <span class="js-widget-page d-none"></span>

    
    <article class=article>
        <div class="article-container pt-3">
             <h1>Juliaæ•°æ®ç§‘å­¦ç³»åˆ—-DataFramesåŒ…</h1> 
        </div>
        
        <div class="article-container">
            <!-- å…³é—­article-style, ä¸ç„¶è·Ÿnutshellä¸å…¼å®¹ -->
            <!-- <div class="gst-style"> -->
            <div class="layout-main">
                <!-- <div class="article-style"> -->
                
                
                <div class="franklin-content">
<div class="tags"><a href="/tag/" id="tag-icon"><svg width="20" height="20" viewBox="0 0 512 512"><defs><style>.cls-1{fill:#141f38}</style></defs><path class="cls-1" d="M215.8 512a76.1 76.1 0 0 1-54.17-22.44L22.44 350.37a76.59 76.59 0 0 1 0-108.32L242 22.44A76.11 76.11 0 0 1 296.2 0h139.2A76.69 76.69 0 0 1 512 76.6v139.19A76.08 76.08 0 0 1 489.56 270L270 489.56A76.09 76.09 0 0 1 215.8 512zm80.4-486.4a50.69 50.69 0 0 0-36.06 14.94l-219.6 219.6a51 51 0 0 0 0 72.13l139.19 139.19a51 51 0 0 0 72.13 0l219.6-219.61a50.67 50.67 0 0 0 14.94-36.06V76.6a51.06 51.06 0 0 0-51-51zm126.44 102.08A38.32 38.32 0 1 1 461 89.36a38.37 38.37 0 0 1-38.36 38.32zm0-51a12.72 12.72 0 1 0 12.72 12.72 12.73 12.73 0 0 0-12.72-12.76z"/><path class="cls-1" d="M217.56 422.4a44.61 44.61 0 0 1-31.76-13.16l-83-83a45 45 0 0 1 0-63.52L211.49 154a44.91 44.91 0 0 1 63.51 0l83 83a45 45 0 0 1 0 63.52L249.31 409.24a44.59 44.59 0 0 1-31.75 13.16zm-96.7-141.61a19.34 19.34 0 0 0 0 27.32l83 83a19.77 19.77 0 0 0 27.31 0l108.77-108.7a19.34 19.34 0 0 0 0-27.32l-83-83a19.77 19.77 0 0 0-27.31 0l-108.77 108.7z"/><path class="cls-1" d="M294.4 281.6a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85zM256 320a12.75 12.75 0 0 1-9.05-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2A12.8 12.8 0 0 1 256 320zM217.6 358.4a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 1 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85z"/></svg></a><a href="/tag/julia/">julia</a>, <a href="/tag/statistics/">statistics</a>&nbsp;&nbsp;&nbsp;&nbsp;<a id="tag-icon"><svg width="20" height="20" class="icon" viewBox="0 0 1024 1024" version="1.1" p-id="3825" width="64" height="64"><path d="M512 416a96 96 0 1 0 0 192 96 96 0 0 0 0-192z m511.952 102.064c-0.016-0.448-0.064-0.864-0.096-1.296a8.16 8.16 0 0 0-0.08-0.656c0-0.32-0.064-0.624-0.128-0.928-0.032-0.368-0.064-0.736-0.128-1.088-0.032-0.048-0.032-0.096-0.032-0.144a39.488 39.488 0 0 0-10.704-21.536c-32.672-39.616-71.536-74.88-111.04-107.072-85.088-69.392-182.432-127.424-289.856-150.8-62.112-13.504-124.576-14.064-187.008-2.64-56.784 10.384-111.504 32-162.72 58.784-80.176 41.92-153.392 99.696-217.184 164.48-11.808 11.984-23.552 24.224-34.288 37.248-14.288 17.328-14.288 37.872 0 55.216 32.672 39.616 71.52 74.848 111.04 107.056 85.12 69.392 182.448 127.408 289.888 150.784 62.096 13.504 124.608 14.096 187.008 2.656 56.768-10.4 111.488-32 162.736-58.768 80.176-41.936 153.376-99.696 217.184-164.48 11.792-12 23.536-24.224 34.288-37.248 5.712-5.872 9.456-13.44 10.704-21.568l0.032-0.128a12.592 12.592 0 0 0 0.128-1.088c0.064-0.304 0.096-0.624 0.128-0.928l0.08-0.656 0.096-1.28c0.032-0.656 0.048-1.296 0.048-1.952l-0.096-1.968zM512 704c-106.032 0-192-85.952-192-192s85.952-192 192-192 192 85.968 192 192c0 106.048-85.968 192-192 192z" p-id="3826"></path></svg></a><span id="busuanzi_value_page_pv"></span></div>
<div class="franklin-toc"><ol><li><a href="#dataframesjl">DataFrames.jl</a><ol><li><a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a><ol><li><a href="#æ„å»º">æ„å»º</a></li><li><a href="#åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</a></li></ol></li><li><a href="#å–å­é›†">å–å­é›†</a><ol><li><a href="#subsetå’Œsubset_æ“ä½œè¡Œ"><code>subset</code>å’Œ<code>subset&#33;</code>: æ“ä½œè¡Œ</a></li><li><a href="#selectselectå’Œtransformtransform_æ“ä½œåˆ—"><code>select/select&#33;</code>å’Œ<code>transform/transform&#33;</code>: æ“ä½œåˆ—</a></li><li><a href="#transformå’Œtransform"><code>transform</code>å’Œ<code>transform&#33;</code></a></li></ol></li><li><a href="#æ•°æ®ç»Ÿè®¡_describeå’Œcombine">æ•°æ®ç»Ÿè®¡: <code>describe</code>å’Œ<code>combine</code></a></li><li><a href="#æ•°æ®æ›¿æ¢">æ•°æ®æ›¿æ¢</a></li><li><a href="#è¾“å…¥è¾“å‡º">è¾“å…¥è¾“å‡º</a></li><li><a href="#joinæ“ä½œ"><code>Join</code>æ“ä½œ</a></li><li><a href="#split-apply-combineæ•°æ®æ“ä½œç­–ç•¥"><code>Split-Apply-Combine</code>æ•°æ®æ“ä½œç­–ç•¥</a></li><li><a href="#reshapingå’Œpivoting_é•¿å®½è¡¨è½¬æ¢"><code>Reshaping</code>å’Œ<code>Pivoting</code>: é•¿å®½è¡¨è½¬æ¢</a></li><li><a href="#æ’åº">æ’åº</a></li><li><a href="#åˆ†ç»„æ•°æ®">åˆ†ç»„æ•°æ®</a></li><li><a href="#ç¼ºå¤±å€¼_missing">ç¼ºå¤±å€¼: Missing</a></li><li><a href="#æ‰©å±•åŒ…_dataframesmetajl">æ‰©å±•åŒ…: DataFramesMeta.jl</a><ol><li><a href="#select"><code>@select&#91;&#33;&#93;</code></a></li><li><a href="#transform"><code>@transform&#91;&#33;&#93;</code></a></li><li><a href="#subset"><code>@subset&#91;&#33;&#93;</code></a></li><li><a href="#combine"><code>@combine</code></a></li><li><a href="#orderby"><code>@orderby</code></a></li><li><a href="#with"><code>@with</code></a></li><li><a href="#eachrow"><code>@eachrow&#91;&#33;&#93;</code></a></li><li><a href="#byrowå’Œr_é€è¡Œæ•°æ®è½¬æ¢"><code>@byrow</code>å’Œ<code>@r...</code>: é€è¡Œæ•°æ®è½¬æ¢</a></li><li><a href="#ç”¨passmissingå¹¿æ’­missing">ç”¨<code>@passmissing</code>å¹¿æ’­missing</a></li><li><a href="#astableå’ŒastableåŒæ—¶åˆ›å»ºå¤šåˆ—"><code>@astable</code>å’Œ<code>AsTable</code>åŒæ—¶åˆ›å»ºå¤šåˆ—</a></li><li><a href="#ç”¨è½¬ä¹‰">ç”¨<code>&#36;</code>è½¬ä¹‰</a></li><li><a href="#ç”¨å¿½ç•¥æŠŠå¯¹åº”çš„symbolè§£ææˆåˆ—å">ç”¨<code>^</code>å¿½ç•¥æŠŠå¯¹åº”çš„<code>Symbol</code>è§£ææˆåˆ—å</a></li><li><a href="#ç”¨chainå®ç®¡é“æ“ä½œ">ç”¨<code>@chain</code>å®ç®¡é“æ“ä½œ</a></li></ol></li></ol></li></ol></div>
<h2 id="dataframesjl"><a href="#dataframesjl" class="header-anchor">DataFrames.jl</a></h2>
<blockquote>
<p><a href="https://dataframes.juliadata.org/stable/">å®˜æ–¹Document</a></p>
</blockquote>
<h3 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="header-anchor">å¿«é€Ÿå¼€å§‹</a></h3>
<h4 id="æ„å»º"><a href="#æ„å»º" class="header-anchor">æ„å»º</a></h4>
<p><code>DataFrame</code>ç±»å‹</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia"># æ‰‹åŠ¨æ„é€ : å•ä¸ªå…ƒç´ çš„åˆ—ä¼šå¹¿æ’­
DataFrame&#40;A&#61;1:3, B&#61;5:7, fied&#61;1&#41;
# ç”¨ &#61;&gt; è¿›è¡Œå¤æ‚åˆ—åDFçš„æ„é€ :
DataFrame&#40;&quot;customer age&quot; &#61;&gt; &#91;15, 20, 25&#93;,
          &quot;first name&quot; &#61;&gt; &#91;&quot;A&quot;, &quot;B&quot;, &quot;C&quot;&#93;&#41;

# ä¹Ÿå¯ä»&quot;åˆ—å&quot;&#61;&gt;&quot;åˆ—å€¼&quot;å­—å…¸/å…·åå…ƒç»„ä¸­æ„é€ DF

# å½“åˆ—åæ—¶, Symbols å¿«è¿‡ Strings

# ä»çŸ©é˜µæ„é€ DF:
DataFrame&#40;matrix, names&#41; # names å¯ä»¥è®¾æˆ&#96;:auto&#96;, åˆ™è‡ªåŠ¨åˆ†é…åˆ—åx1, x2 ..., æˆ–è€…è®¾æˆä¸æ•°æ®åˆ—æ•°ç›¸åŒçš„æ•°ç»„ã€‚

# æŒ‰åˆ—æ„é€ :
df &#61; DataFrame&#40;&#41;
df.A &#61; 1:8
df.B &#61; &#91;&quot;M&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;&#93;

# æŒ‰è¡Œæ„é€ :
df &#61; DataFrame&#40;A&#61;Int&#91;&#93;, B&#61;String&#91;&#93;&#41;
push&#33;&#40;df, &#40;1, &quot;M&quot;&#41;&#41;
push&#33;&#40;df, &#40;2, &quot;N&quot;&#41;&#41;

# ä»å…¶ä»–&#96;Table.jl&#96;çš„å…·è±¡æ ¼å¼ä¸­è½¬æˆDF:
df &#61; sqltable |&gt; DataFrame
df &#61; &#91;&#40;a&#61;1, b&#61;2&#41;, &#40;a&#61;3, b&#61;4&#41;&#93; |&gt; DataFrame

# ä»CSVæ–‡ä»¶ä¸­è¯»å–DF:
using CSV
data &#61; CSV.read&#40;path, DataFrame&#41;

# copy
data2 &#61; copy&#40;data1&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="header-anchor">åŸºæœ¬æ“ä½œ</a></h4>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia"># åˆ—
german.Sex
german.&quot;Sex&quot;
german&#91;&#33;, :Sex&#93;
german&#91;&#33;, &quot;Sex&quot;&#93;
names&#40;german&#41;
names&#40;german, AbstractString&#41; # è·å–æŒ‡å®šç±»å‹åˆ—çš„åå­—
propertynames&#40;german&#41; # è·å–Symbolsæ ¼å¼çš„åå­—
eachcol&#40;german&#41; # æŒ‰åˆ—è¿­ä»£
empty, empty&#33;   # åˆ é™¤è¡Œ, ä½†ä¿ç•™åˆ—æ•°&#40;ç»´åº¦&#41;

# DataFrameåŸºæœ¬ä¿¡æ¯
size&#40;df&#41;   # &#40;è¡Œ, åˆ—&#41;
size&#40;df,1&#41; # ç¬¬ä¸€ç»´çš„å¤§å°&#40;è¡Œæ•°&#41;
size&#40;df,2&#41; # ç¬¬äºŒç»´çš„å¤§å°&#40;åˆ—æ•°&#41;
nrow&#40;df&#41;, ncol&#40;df&#41;
describe&#40;df&#41; # åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯mean, min, max, median, nmissing, elementType
describe&#40;df, cols&#61;1:3&#41; # åªç»Ÿè®¡å‰ä¸‰åˆ—
show&#40;df, allcols&#61;true&#41;
show&#40;df, allrows&#61;true&#41;

mapcols&#40;func, df&#41; # æŒ‰åˆ—åº”ç”¨func, è¿”å›æ–°df
mapcols&#40;id -&gt; id .^ 2, german&#41;

first&#40;df, n&#41;, last&#40;df, n&#41; # né»˜è®¤æ˜¯1</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h3 id="å–å­é›†"><a href="#å–å­é›†" class="header-anchor">å–å­é›†</a></h3>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df&#91;1:3, :&#93;
df&#91;:, &#91;:A, :B&#93;&#93;
df&#91;&#33;, &#91;:A&#93;&#93; # è¿”å›ä¸€ä¸ªdf
df&#91;&#33;, :A&#93; # è¿”å›ä¸€ä¸ªVector

# æ­£åˆ™; Not; Between; All; Cols
df&#91;&#33;, r&quot;x&quot;&#93; # å–å‡ºåˆ—ååŒ…å«xçš„åˆ—
df&#91;&#33;, Not&#40;:x1&#41;&#93; # å–å‡ºé™¤äº†&#96;x1&#96;ä¹‹å¤–çš„åˆ—
df&#91;&#33;, Between&#40;:x1, :x4&#41;&#93;
df&#91;:, All&#40;&#41;&#93;
df&#91;:, Cols&#40;x -&gt; startswith&#40;x, &quot;x&quot;&#41;&#41;&#93;
# Cols è¿˜å¯ç”¨äºç»™åˆ—é‡æ’åº:
df&#91;:, Cols&#40;r&quot;x&quot;, :&#41;&#93; # æŠŠæ‰€æœ‰åŒ…å«xçš„åˆ—æ’åœ¨å‰é¢, å…¶ä»–åˆ—æ’åœ¨åè¾¹
df&#91;:, Cols&#40;Not&#40;r&quot;x&quot;&#41;, :&#41;&#93; # æŠŠæ‰€æœ‰åŒ…å«xçš„åˆ—æ’åœ¨åé¢, å…¶ä»–åˆ—æ’åœ¨å‰è¾¹

# æŒ‰ç…§æ•°å€¼è¿‡æ»¤
df&#91;df.A .&gt; 500, :&#93; #å–å‡ºæ‰€æœ‰Aåˆ—æ•°å€¼å¤§äº 500 çš„è¡Œ
df&#91;&#40;df.A .&gt; 500&#41; .&amp; &#40;300 .&lt; df.C .&lt; 400&#41;, :&#93;
df&#91;in.&#40;df.A, Ref&#40;&#91;1, 5, 601&#93;&#41;&#41;, :&#93;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="subsetå’Œsubset_æ“ä½œè¡Œ"><a href="#subsetå’Œsubset_æ“ä½œè¡Œ" class="header-anchor"><code>subset</code>å’Œ<code>subset&#33;</code>: æ“ä½œè¡Œ</a></h4>
<pre><code class="language-julia">subset&#40;df::AbstractDataFrame, args...; skipmissing::Bool&#61;false, view::Bool&#61;false&#41;
subset&#40;gdf::GroupedDataFrame, args...; skipmissing::Bool&#61;false, view::Bool&#61;false,
       ungroup::Bool&#61;true&#41;</code></pre>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">subset&#40;df, :A &#61;&gt; a -&gt; a .&lt; 10, :C &#61;&gt; c -&gt; isodd.&#40;c&#41;&#41;

# ç”¨coalesceå‡½æ•°è·³è¿‡åŒ…å«missingçš„è¡Œ
# coalesce&#40;x...&#41; è¿”å›ç¬¬ä¸€ä¸ªémissingçš„å€¼
subset&#40;df, :x &#61;&gt; x -&gt; coalesce.&#40;iseven.&#40;x&#41;, false&#41;&#41; # å¦‚æœæ˜¯missing, è¿‡æ»¤æ¡ä»¶å°±è¿”å›false
# ç­‰ä»·äº
subset&#40;df, :x &#61;&gt; x -&gt; iseven.&#40;x&#41;, skipmissing&#61;true&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="selectselectå’Œtransformtransform_æ“ä½œåˆ—"><a href="#selectselectå’Œtransformtransform_æ“ä½œåˆ—" class="header-anchor"><code>select/select&#33;</code>å’Œ<code>transform/transform&#33;</code>: æ“ä½œåˆ—</a></h4>
<ul>
<li><p>å¤æ‚çš„æŒ‰åˆ—è¿‡æ»¤å‡½æ•°</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">select&#40;df, Not&#40;:x1&#41;&#41;
select&#40;df, r&quot;x&quot;&#41;
select&#40;df, :x1 &#61;&gt; :a1, :x2 &#61;&gt; :a2&#41; # é‡å‘½ååˆ—
select&#40;df, :x1, :x2 &#61;&gt; &#40;x -&gt; x .- minimum&#40;x&#41;&#41; &#61;&gt; :x2&#41; # æ›´æ”¹x2çš„æ•°å€¼
select&#40;df, :x2, :x2 &#61;&gt; ByRow&#40;sqrt&#41;&#41; # ç”Ÿæˆæ–°çš„åä¸º:x2_sqrtçš„åˆ—, å­˜æ”¾x2åˆ—çš„å¼€å¹³æ–¹å€¼
select&#40;df, AsTable&#40;:&#41; &#61;&gt; ByRow&#40;extrema&#41; &#61;&gt;  &#91;:lo, :hi&#93;&#41; # é€è¡Œè®¡ç®—æ‰€æœ‰åˆ—çš„æå€¼, å­˜åˆ°:lo :hiä¸¤åˆ—ä¸­</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p>æ°¸è¿œè¿”å›DataFrame</p>
</li>
<li><p>é»˜è®¤ä¼šä»åŸå§‹dfä¸­æ‹·è´ä¸€ä»½é€‰æ‹©çš„åˆ—, å¯ä»¥ç”¨<code>copycols&#61;false</code>å‚æ•°å…³é—­copy</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important">  df2 &#61; select&#40;df, :x1&#41; df2.x1 &#61;&#61;&#61; df.x1 # false, é»˜è®¤æ˜¯copyäº†ä¸€ä»½æ–°çš„ df2 &#61; select&#40;df, :x1, copycols&#61;false&#41; df2.x1 &#61;&#61;&#61; df.x1 # true </div>
<h4 id="transformå’Œtransform"><a href="#transformå’Œtransform" class="header-anchor"><code>transform</code>å’Œ<code>transform&#33;</code></a></h4>
<p>å’Œ<code>select</code>çš„ç”¨æ³•åŸºæœ¬ä¸€æ ·, å”¯ä¸€åŒºåˆ«æ˜¯<span class="cadmon sadmon-note"><code>transform/transform&#33;</code>ä¼šåŒæ—¶è¿”å›åŸå§‹dfä¸­çš„æ‰€æœ‰åˆ—</span>ã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; df &#61; DataFrame&#40;x1&#61;&#91;1, 2&#93;, x2&#61;&#91;3, 4&#93;, y&#61;&#91;5, 6&#93;&#41;
2Ã—3 DataFrame
 Row â”‚ x1     x2     y
     â”‚ Int64  Int64  Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚     1      3      5
   2 â”‚     2      4      6

julia&gt; transform&#40;df, All&#40;&#41; &#61;&gt; &#43;&#41;
2Ã—4 DataFrame
 Row â”‚ x1     x2     y      x1_x2_y_&#43;
     â”‚ Int64  Int64  Int64  Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚     1      3      5          9
   2 â”‚     2      4      6         12</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>ä¸€ä¸ªå¤æ‚çš„ä¾‹å­, æŒ‰è¡Œè®¡ç®—<code>sum</code>, <code>num of elements</code>, <code>mean</code>, åŒæ—¶å¿½ç•¥<code>missing</code>.</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; using Statistics

julia&gt; df &#61; DataFrame&#40;x&#61;&#91;1, 2, missing&#93;, y&#61;&#91;1, missing, missing&#93;&#41;
3Ã—2 DataFrame
 Row â”‚ x        y
     â”‚ Int64    Int64 
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚       1        1
   2 â”‚       2  missing
   3 â”‚ missing  missing

julia&gt; transform&#40;df, AsTable&#40;:&#41; .&#61;&gt;
                    ByRow.&#40;&#91;sumâˆ˜skipmissing,
                            x -&gt; count&#40;&#33;ismissing, x&#41;,
                            meanâˆ˜skipmissing&#93;&#41; .&#61;&gt;
                    &#91;:sum, :n, :mean&#93;&#41;
3Ã—5 DataFrame
 Row â”‚ x        y        sum    n      mean
     â”‚ Int64    Int64    Int64  Int64  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚       1        1      2      2      1.0
   2 â”‚       2  missing      2      1      2.0
   3 â”‚ missing  missing      0      0      NaN</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-todo">
<legend class="admon-legend admon-legend-todo"> Todo</legend>
  <a href="https://juliadata.github.io/DataFramesMeta.jl/stable/">DataFramesMeta.jl</a> æ¨¡å—ä¸­æœ‰æ›´å¤šå¥½ç”¨çš„æ•°æ®å¤„ç†å·¥å…·, éœ€è¦ä¸€èµ·è®°å½•ã€‚ 
</fieldset>

<h3 id="æ•°æ®ç»Ÿè®¡_describeå’Œcombine"><a href="#æ•°æ®ç»Ÿè®¡_describeå’Œcombine" class="header-anchor">æ•°æ®ç»Ÿè®¡: <code>describe</code>å’Œ<code>combine</code></a></h3>
<ul>
<li><p><code>describe</code>: è¿”å›ä¸€ä¸ªdf, è®°å½•è¡¨æ ¼æ¯åˆ—åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯<code>mean, min, median, max, nmissing, eltype</code></p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">describe&#40;df&#41;
describe&#40;df&#91;&#33;, &#91;:A&#93;&#93;&#41; # åªå¯¹ç‰¹å®šåˆ—ç»Ÿè®¡</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p><code>combine</code>: åº”ç”¨ç»Ÿè®¡å‡½æ•°</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">combine&#40;df, names&#40;df&#41; .&#61;&gt; sum&#41;
combine&#40;df, names&#40;df&#41; .&#61;&gt; sum, names&#40;df&#41; .&#61;&gt; prod&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<h3 id="æ•°æ®æ›¿æ¢"><a href="#æ•°æ®æ›¿æ¢" class="header-anchor">æ•°æ®æ›¿æ¢</a></h3>
<ul>
<li><p><code>replace&#33;</code>: å¯¹å•åˆ—è¿›è¡Œæ›¿æ¢</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; df &#61; DataFrame&#40;a&#61;&#91;&quot;a&quot;, &quot;None&quot;, &quot;b&quot;, &quot;None&quot;&#93;, b&#61;1:4,
                      c&#61;&#91;&quot;None&quot;, &quot;j&quot;, &quot;k&quot;, &quot;h&quot;&#93;, d&#61;&#91;&quot;x&quot;, &quot;y&quot;, &quot;None&quot;, &quot;z&quot;&#93;&#41;
4Ã—4 DataFrame
 Row â”‚ a       b      c       d
     â”‚ String  Int64  String  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a           1  None    x
   2 â”‚ None        2  j       y
   3 â”‚ b           3  k       None
   4 â”‚ None        4  h       z

julia&gt; replace&#33;&#40;df.a, &quot;None&quot; &#61;&gt; &quot;c&quot;&#41;
4-element Vector&#123;String&#125;:
 &quot;a&quot;
 &quot;c&quot;
 &quot;b&quot;
 &quot;c&quot;

julia&gt; df
4Ã—4 DataFrame
 Row â”‚ a       b      c       d
     â”‚ String  Int64  String  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a           1  None    x
   2 â”‚ c           2  j       y
   3 â”‚ b           3  k       None
   4 â”‚ c           4  h       z</code></pre>
<p><div class="code-lag">julia</div></fieldset></p>
<p>ä»¥ä¸Šæ“ä½œç­‰ä»·äº<code>df.a &#61; replace&#40;df.a, &quot;None&quot; &#61;&gt; &quot;c&quot;&#41;</code>, ä½†æ˜¯æ˜¯<code>in-place</code>çš„æ“ä½œ, ä¸éœ€è¦é‡æ–°åˆ†é…å†…å­˜ã€‚</p>
<p>å¦‚æœéœ€è¦å¯¹å¤šåˆ—è¿›è¡Œ<code>in-place</code>çš„æ›¿æ¢æ“ä½œ, åˆ™å¯ä»¥ç”¨<code>å¹¿æ’­</code>æ¥å®ç°:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia"># replacement on a subset of columns &#91;:c, :d&#93;
julia&gt; df&#91;:, &#91;:c, :d&#93;&#93; .&#61; ifelse.&#40;df&#91;&#33;, &#91;:c, :d&#93;&#93; .&#61;&#61; &quot;None&quot;, &quot;c&quot;, df&#91;&#33;, &#91;:c, :d&#93;&#93;&#41;;

julia&gt; df
4Ã—4 DataFrame
 Row â”‚ a       b      c       d
     â”‚ String  Int64  String  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a           1  c       x
   2 â”‚ c           2  j       y
   3 â”‚ b           3  k       c
   4 â”‚ c           4  h       z

julia&gt; df .&#61; ifelse.&#40;df .&#61;&#61; &quot;c&quot;, &quot;None&quot;, df&#41; # replacement on entire data frame
4Ã—4 DataFrame
 Row â”‚ a       b      c       d
     â”‚ String  Int64  String  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a           1  None    x
   2 â”‚ None        2  j       y
   3 â”‚ b           3  k       None
   4 â”‚ None        4  h       z</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>æœ€åä¸€å¥å¦‚æœæŠŠ<code>.&#61;</code>æ¢æˆ<code>&#61;</code>, åˆ™ä¸ä¼šæ‰§è¡Œ<code>in-place</code>æ“ä½œ, ä¼šé¢å¤–åˆ†é…å†…å­˜: <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; @time dfx &#61; ifelse.&#40;df&#91;&#33;, &#91;:c, :d&#93;&#93; .&#61;&#61; &quot;NA&quot;, &quot;c&quot;, df&#91;&#33;, &#91;:c, :d&#93;&#93;&#41;;
  0.000104 seconds &#40;92 allocations: 6.781 KiB&#41;

julia&gt; @time dfx .&#61; ifelse.&#40;df&#91;&#33;, &#91;:c, :d&#93;&#93; .&#61;&#61; &quot;NA&quot;, &quot;c&quot;, df&#91;&#33;, &#91;:c, :d&#93;&#93;&#41;;
  0.000073 seconds &#40;81 allocations: 5.484 KiB&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset></p>
<p>
<fieldset class="admon admon-warn">
<legend class="admon-legend admon-legend-warn"> Warn</legend>
  å¦‚æœåŸæœ¬çš„åˆ—æ ¼å¼å¹¶ä¸æ”¯æŒ<code>missing</code>, ç„¶åéœ€è¦æŠŠæŸäº›å€¼æ›¿æ¢æˆ<code>missing</code>, è¿™ç§æƒ…å†µä¸‹<code>in-place</code>æ“ä½œæ˜¯ä¸æ”¯æŒçš„ã€‚è¦ä¹ˆç”¨<code>&#61;</code>, è¦ä¹ˆå°±æå‰æ‰§è¡Œ<code>allowmissing&#33;</code>:</p>
<p><fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; df2 &#61; ifelse.&#40;df .&#61;&#61; &quot;None&quot;, missing, df&#41; # æ³¨æ„è¿™é‡Œçš„dfæ˜¯ä¸æ”¯æŒmissingçš„, æ‰€ä»¥ç”¨.&#61;ä¼šæŠ¥é”™, åªèƒ½ç”¨&#61;
4Ã—4 DataFrame
 Row â”‚ a        b      c        d
     â”‚ String?  Int64  String?  String?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a            1  missing  x
   2 â”‚ missing      2  j        y
   3 â”‚ b            3  k        missing
   4 â”‚ missing      4  h        z

julia&gt; allowmissing&#33;&#40;df&#41; # æˆ–è€…æå‰æŠŠdfè½¬æˆæ”¯æŒmissingçš„
4Ã—4 DataFrame
 Row â”‚ a        b       c        d
     â”‚ String?  Int64?  String?  String?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a             1  None     x
   2 â”‚ None          2  j        y
   3 â”‚ b             3  k        None
   4 â”‚ None          4  h        z

julia&gt; df .&#61; ifelse.&#40;df .&#61;&#61; &quot;None&quot;, missing, df&#41;
4Ã—4 DataFrame
 Row â”‚ a        b       c        d
     â”‚ String?  Int64?  String?  String?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a             1  missing  x
   2 â”‚ missing       2  j        y
   3 â”‚ b             3  k        missing
   4 â”‚ missing       4  h        z</code></pre>
<p><div class="code-lag">julia</div></fieldset> 
</fieldset>
 </div>
<h3 id="è¾“å…¥è¾“å‡º"><a href="#è¾“å…¥è¾“å‡º" class="header-anchor">è¾“å…¥è¾“å‡º</a></h3>
<ul>
<li><p>ç”¨<a href="https://github.com/JuliaData/CSV.jl">CSV.jl</a>è¯»å†™å„ç§åˆ†éš”æ–‡æœ¬æ ¼å¼: <code>CSV.File</code>, <code>CSV.read</code>, <code>CSV.write</code></p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using CSV

df &#61; DataFrame&#40;CSV.File&#40;&quot;input.csv&quot;&#41;&#41; # è¯»
CSV.write&#40;&quot;output.csv&quot;, df&#41; # å†™</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p>Juliaæ ‡å‡†åº“ä¸­çš„<code>DelimitedFiles</code>ä¹Ÿå¯ä»¥ç”¨æ¥è¯»å†™DataFrame:</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using DelimitedFiles, DataFrames

data, header &#61; readdlm&#40;&quot;in.csv&quot;, &#39;,&#39;, header&#61;true&#41;;
df_raw &#61; DataFrame&#40;data, vec&#40;header&#41;&#41;
df &#61; identity.&#40;df_raw&#41;
#å†™:
writedlm&#40;&quot;test.csv&quot;, Iterators.flatten&#40;&#40;&#91;names&#40;df&#41;&#93;, eachrow&#40;df&#41;&#41;&#41;, &#39;,&#39;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset></p>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
</p>
<ul>
<li><p>header æ˜¯ä¸€ä¸ªä¸€ç»´çŸ©é˜µMatrix, éœ€è¦è½¬æˆVector;</p>
</li>
<li><p>df_rawä¸­æ¯åˆ—çš„ç±»å‹éƒ½æ˜¯<code>Any</code>, ç”¨identityç¼©å°æ¯åˆ—çš„ç±»å‹, è¿™æ˜¯å› ä¸º<code>data</code>æ˜¯ä¸€ä¸ª<code>Matrix</code>, å†…éƒ¨å…ƒç´ åº”è¯¥æ˜¯åŒä¸€ç§ç±»å‹&#40;åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯<code>Any</code>&#41;, æ‰€ä»¥è½¬æˆçš„DFç±»å‹æ˜¯<code>Any</code>;</p>
</li>
<li><p>ä»¥ä¸Šè¿™äº›æ“ä½œ, åœ¨<code>CSV.jl</code>ä¸­éƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„, æ‰€ä»¥<span class="sadmon sadmon-tip">è¿˜æ˜¯ç”¨<code>CSV.jl</code>æ–¹ä¾¿å•Š</span>;</p>
</li>
</ul>
<p>
</fieldset>

<p>
<fieldset class="hadmon admon-info"><legend class="hadmon-legend admon-legend-info"> ç–‘é—®</legend>
  æ‰€ä»¥<code>DataFrame</code>çš„å¹¿æ’­æ“ä½œæ˜¯æŒ‰åˆ—çš„å’¯? 
</fieldset>
 </div>
<ul>
<li><p>ç”¨<code>JSONTables.jl</code>è¯»å†™JSON</p>
</li>
<li><p>ç”¨<code>XLSX.jl</code>è¯»å†™XLSX</p>
</li>
<li><p>å…¶ä»–æ ¼å¼å¹³æ—¶ä¸å¸¸ç”¨, å°±ä¸åˆ—ä¸¾äº†, ç”¨æ—¶è‡ªæœ</p>
</li>
</ul>
<h3 id="joinæ“ä½œ"><a href="#joinæ“ä½œ" class="header-anchor"><code>Join</code>æ“ä½œ</a></h3>
<blockquote>
<p>åŠŸèƒ½ä¸<a href="https://en.wikipedia.org/wiki/Join_&#40;SQL&#41;">SQL Join</a>ç±»ä¼¼</p>
</blockquote>
<ul>
<li><p><code>innerjoin</code></p>
</li>
<li><p><code>leftjoin</code></p>
</li>
<li><p><code>rightjoin</code></p>
</li>
<li><p><code>outerjoin</code></p>
</li>
<li><p><code>semijoin</code>: ç±»ä¼¼<code>innerjoin</code>, ä½†æ˜¯è¾“å‡ºæ˜¯ä»¥ç¬¬ä¸€ä¸ªdfä¸ºå‚ç…§</p>
</li>
<li><p><code>antijoin</code>: è¾“å‡ºç¬¬ä¸€ä¸ªdfæœ‰,ç¬¬äºŒä¸ªdfä¸­æ²¡æœ‰çš„</p>
</li>
<li><p><code>crossjoin</code>: è¾“å‡ºæ˜¯æ‰€æœ‰dfçš„åˆ—çš„ç¬›å¡å°”ç§¯</p>
</li>
</ul>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">innerjoin&#40;df1, df2, on &#61; :ID&#41; # å¤§éƒ¨åˆ†joinéƒ½ç”¨åŒä¸€ç§è¯­æ³•
innerjoin&#40;df1, df2, on &#61; :ID_df1 &#61;&gt; :ID_df2&#41; # å¦‚æœè¦åˆå¹¶çš„åˆ—åå­—ä¸ä¸€æ ·, ç”¨&#96;&#61;&gt;&#96;æŒ‡ç¤ºå¯¹åº”å…³ç³»
crossjoin&#40;df1, df2, makeunique &#61; true&#41; # crossjoinä¸ä½¿ç”¨&#96;on&#96;å…³é”®è¯</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
</p>
<ul>
<li><p>å¦‚æœå‚è€ƒåˆ—æœ‰é‡å¤å€¼, <code>inner|outer|left|right</code>ä¼šæŠŠæ‰€æœ‰æ’åˆ—ç»„åˆéƒ½è¾“å‡º;</p>
</li>
<li><p>å¯ä»¥ç”¨<code>validate&#61;&#40;true,true&#41;</code>æ¥æŒ‡ç¤ºå¯¹å“ªäº›å‚è€ƒåˆ—å¯¹è¿›è¡Œæ£€æŸ¥, å¦‚æœè¿™äº›åˆ—å¯¹æœ‰é‡å¤å€¼, ä¼šæŠ¥é”™;</p>
</li>
</ul>
<p>
</fieldset>

<ul>
<li><p><code>source</code>å…³é”®è¯å¯ä»¥ç”¨æ¥æŒ‡ç¤ºå‚è€ƒåˆ—åœ¨ä¸¤ä¸ªè¾“å…¥dfä¸­æ˜¯ä¸æ˜¯å…±æœ‰çš„:</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; outerjoin&#40;df1, df2, on&#61;:ID, validate&#61;&#40;true, true&#41;, source&#61;:source&#41;
3Ã—4 DataFrame
 Row â”‚ ID     Name     Job      source
     â”‚ Int64  String?  String?  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    20  John     Lawyer   both
   2 â”‚    40  Jane     missing  left_only
   3 â”‚    60  missing  Doctor   right_only</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<h3 id="split-apply-combineæ•°æ®æ“ä½œç­–ç•¥"><a href="#split-apply-combineæ•°æ®æ“ä½œç­–ç•¥" class="header-anchor"><code>Split-Apply-Combine</code>æ•°æ®æ“ä½œç­–ç•¥</a></h3>

<fieldset class="hadmon admon-note"><legend class="hadmon-legend admon-legend-note"> `Split-Apply-Combine`</legend>
  æ•°æ®åˆ†æä¸­çš„ç»å…¸ç­–ç•¥:</p>
<ol>
<li><p>æŠŠæ•°æ®é›†æ‹†åˆ†æˆä¸åŒçš„åˆ†ç»„;</p>
</li>
<li><p>å¯¹æŸäº›åˆ†ç»„åº”ç”¨ç‰¹å®šçš„æ–¹æ³•;</p>
</li>
<li><p>åˆå¹¶ç»“æœæˆæ–°çš„æ•°æ®é›†;</p>
</li>
</ol>
<p>
</fieldset>

<p>DataFrameä¸­å®ç°çš„æ–¹å¼æ˜¯åˆ©ç”¨<code>groupby</code>åˆ›å»º<code>GroupedDataFrame</code>æ•°æ®ç±»å‹, ç„¶åç»“åˆ<code>combine</code>, <code>select</code>, <code>transform</code>ç­‰æ“ä½œå¯¹é½è¿›è¡Œæ•°æ®å¤„ç†ã€‚</p>
<ul>
<li><p><code>groupby</code>: å¯¹DataFrameè¿›è¡Œåˆ†ç»„</p>
</li>
<li><p><code>combine</code>: ä¸é™åˆ¶è¿”å›è¡Œæ•°, è¡Œçš„é¡ºåºå–å†³äºgroupçš„é¡ºåº, å¾ˆé€‚åˆåˆ†ç»„è®¡ç®—ç»Ÿè®¡ä¿¡æ¯</p>
</li>
<li><p><code>select</code>: è¿”å›è·ŸåŸå§‹dfä¸€æ ·çš„è¡Œæ•°å’Œé¡ºåºçš„æ–°åˆ—</p>
</li>
<li><p><code>transform</code>: è¿”å›åŸå§‹dfä»¥åŠè¿½åŠ çš„æ–°çš„åˆ—</p>
</li>
</ul>
<p>æ”¯æŒçš„å¤„ç†å‡½æ•°å¯ä»¥æ˜¯:</p>
<ol>
<li><p>æ ‡å‡†çš„åˆ—æŒ‡ç¤ºä¿¡æ¯: <code>Integers</code>, <code>Symbols</code>, <code>Vector&#123;Integers|Symbols&#125;</code>,<code>Strings</code>, <code>All</code>, <code>Cols</code>, <code>:</code>, <code>Between</code>, <code>Not</code>, Regex</p>
</li>
<li><p><code>cols &#61;&gt; function</code>é”®å€¼å¯¹: è¿™ç§æ–¹æ³•è°ƒç”¨æ—¶, ä¼š<span class="cadmon sadmon-warn">è‡ªåŠ¨ç”Ÿæˆç»“æœåˆ—çš„åå­—</span>:é»˜è®¤æ˜¯æ‹¼æ¥è¾“å…¥åˆ—çš„åå­—å’Œå‡½æ•°çš„åå­—, <code>function</code>éœ€è¦è¿”å›ä¸€ä¸ªå€¼æˆ–è€…ä¸€ä¸ªå‘é‡</p>
</li>
<li><p><code>cols &#61;&gt; function &#61;&gt; target_cols</code>æ–¹å¼: æ˜¾å¼åœ°å£°æ˜è¾“å‡ºåˆ—çš„åå­—, å¯ä»¥æ˜¯å•ä¸ªå€¼, å‘é‡, æˆ–è€…æ˜¯<code>AsTable</code>, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª<span class="cadmon sadmon-warn">ä»¥<code>cols</code>ä¸­çš„åå­—ä¸ºå‚æ•°, è¿”å›ç›®æ ‡åˆ—åå­—çš„<strong>å‡½æ•°</strong></span></p>
</li>
<li><p><code>cols &#61;&gt; target_cols</code>æ–¹å¼: é‡å‘½å</p>
</li>
<li><p><code>nrow</code>æˆ–<code>nrow &#61;&gt; target_cols</code>: å¿«é€Ÿç»Ÿè®¡è¡Œæ•°, ä¸æ˜¾å¼å£°æ˜åå­—çš„è¯, è¾“å‡ºåå­—é»˜è®¤æ˜¯<code>:nrow</code></p>
</li>
<li><p><span class="Sadmon Sadmon-note">2</span>å’Œ<span class="Sadmon Sadmon-note">5</span>ä¸­é”®å€¼å¯¹ç»„æˆçš„å‘é‡æˆ–çŸ©é˜µ</p>
</li>
<li><p><code>SubDataFrame</code>ç±»å‹æ”¯æŒçš„å‡½æ•°: ä¸å¤ªæ¨è, å› ä¸ºè¡¨ç°åŠ›ä¸è¡Œ</p>
</li>
</ol>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
</p>
<ul>
<li><p>å½“å‡ºç°<code>x &#61;&gt; y</code>è¿™ç§ç”¨æ³•æ—¶, ä¼šå…ˆæ£€æŸ¥æ˜¯ä¸æ˜¯<code>nrow &#61;&gt; target_cols</code>, å¦‚æœä¸æ˜¯, åˆ™ä¸€å¾‹æŒ‰ç…§<code>cols &#61;&gt; function</code>çš„é€»è¾‘å»å¤„ç†</p>
</li>
<li><p>å¦‚æœ<code>cols</code>æˆ–è€…<code>target_cols</code>ä¸­æ˜¯<code>All</code>, <code>Cols</code>, <code>Between</code> æˆ–è€… <code>Not</code>è¿™å‡ ä¸ªç‰¹å®šæ–¹æ³•æ—¶, å¯ä»¥ç”¨<code>.&#61;&gt;</code>è¿›è¡Œ<strong>å¹¿æ’­</strong>, ç­‰åŒäºå¹¿æ’­<code>names&#40;df, cols&#41;</code>æˆ–è€…<code>names&#40;df, cols&#41;</code> <span class="Sadmon Sadmon-todo">è¿™è§£ç­”äº†æˆ‘ä¹‹å‰çš„ç–‘æƒ‘: å°±æ˜¯æŒ‰åˆ—å¹¿æ’­, å®é™…ä¸Šæ˜¯æŒ‰åˆ—åå¹¿æ’­</span></p>
</li>
<li><p><code>cols &#61;&gt; function &#91;&#61;&gt; target_cols&#93;</code>è¿™ç§ç”¨æ³•ä¸­, å¦‚æœ<code>cols</code>æ˜¯<code>AsTable</code>å¯¹è±¡, åˆ™ä¼šæŠŠä¸€ä¸ªç”±<code>cols</code>å½“åå­—çš„å…·åå…ƒç»„ä¼ é€’ç»™<code>function</code></p>
</li>
</ul>
<p>
</fieldset>


<fieldset class="hadmon admon-note"><legend class="hadmon-legend admon-legend-note"> functionçš„è¿”å›å€¼</legend>
</p>
<ol>
<li><p>å¦‚æœ<code>cols</code>å’Œ<code>target_cols</code>éƒ½æ²¡æœ‰æŒ‡å®š, åªä¼ é€’äº†<code>function</code>, åˆ™åº”è¯¥è¿”å›<code>DataFrame, Matrix, NamedTuple, DataFrameRow</code>ä¸­çš„ä¸€ç§, è¿”å›å…¶ä»–ç±»å‹éƒ½åªä¼šå­˜æˆä¸€åˆ—</p>
</li>
<li><p>å¦‚æœ<code>target_cols</code>æ˜¯<code>Symbol</code>æˆ–<code>String</code>, <code>function</code>åº”è¯¥åªè¿”å›ä¸€åˆ—, è¿™æ—¶è¿”å›<code>DataFrame, Matrix, NamedTuple, DataFrameRow</code>çš„å‡½æ•°ä¼šæŠ¥é”™</p>
</li>
<li><p>å¦‚æœ<code>target_cols</code>æ˜¯<code>Vector&#123;Symbol&#125;</code>æˆ–<code>Vector&#123;String&#125;</code>æˆ–<code>AsTable</code>, <code>function</code>åº”è¯¥è¿”å›å¤šåˆ—, å¦‚æœ<code>function</code>è¿”å›å€¼æ˜¯<code>AbstractVector</code>, åˆ™å…¶æ¯ä¸ªå…ƒç´ éƒ½å¾—æ”¯æŒ<code>keys</code>æ–¹æ³•, è€Œä¸”<code>keys</code>æ–¹æ³•å¿…é¡»å¾—è¿”å›<code>Symbol, String, Integer</code>, å¦‚æœè¿”å›<code>Integer</code>, åˆ™è¾“å‡ºåˆ—åé»˜è®¤æ˜¯<code>x</code>å¼€å¤´&#40;<code>x1, x2 ...</code>&#41;</p>
</li>
<li><p>å¦‚æœ<code>function</code>çš„è¿”å›å€¼æ˜¯å…¶ä»–ç±»å‹, ä¼šè¢«è®¤ä¸ºæ˜¯<code>Table.jl</code>æ”¯æŒçš„è¡¨æ ¼ç±»å‹, ç„¶åå°è¯•åˆ©ç”¨<code>Tables.columntable</code>æ–¹æ³•è·å–å…¶åå­—</p>
</li>
<li><p><code>function</code>çš„è¿”å›å€¼ä¸­, å¦‚æœæ˜¯<code>Ref</code>æˆ–è€…é›¶ç»´å‘é‡&#40;<span class="cadmon sadmon-todo">å°±æ˜¯ç©ºå‘é‡?</span>&#41;ä¼šè¢«å½“ä½œæ˜¯å•ç‹¬çš„ä¸€è¡Œ</p>
</li>
</ol>
<p>
</fieldset>

<p>å½“juliaå¤šæ ¸å¯åŠ¨æ—¶, å¯¹DataFrameè°ƒç”¨è½¬æ¢å‡½æ•°, ä¼šè‡ªåŠ¨å¯¹æ¯ä¸ªè½¬æ¢äº‹ä»¶è¿›è¡Œå¹¶è¡Œ&#40;é™¤éä¸€äº›ä¸“é—¨ä¼˜åŒ–è¿‡çš„è®¡ç®—, æ¯”å¦‚<code>sum</code>, ä¼šæŠŠæ‰€æœ‰åˆ†ç»„çš„è®¡ç®—å•çº¿ç¨‹ä¸²è¡Œ&#41;, å› æ­¤è°ƒç”¨çš„å‡½æ•°åº”è¯¥æ˜¯<code>å¹²å‡€çš„</code>&#40;å³ä¸èƒ½ä¿®æ”¹å…¨å±€å˜é‡&#41;, æˆ–è€…ç”¨è¿›ç¨‹é”&#40;å¤ªé«˜ç«¯äº†æš‚æ—¶ç”¨ä¸ä¸Š&#41;</p>
<p>å¯ä»¥ç”¨<code>ByRow</code>ç»“æ„è¡¨æ˜å‡½æ•°æ˜¯æŒ‰è¡Œæ‰§è¡Œ, è€Œä¸æ˜¯æŒ‰åˆ—æ‰§è¡Œã€‚</p>

<fieldset class="hadmon admon-note"><legend class="hadmon-legend admon-legend-note"> ä¸€äº›å…³é”®è¯</legend>
</p>
<ul>
<li><p><code>keepkeys</code>: åˆ†ç»„çš„åˆ—æ˜¯å¦è¦åœ¨ç»“æœDFä¸­ä¿ç•™</p>
</li>
<li><p><code>ungroup</code>: è¾“å‡º<code>DataFrame</code>è¿˜æ˜¯<code>GroupedDataFrame</code></p>
</li>
<li><p><code>copycols</code>: åŸå§‹DFä¸­æ²¡è¢«æ“ä½œçš„åˆ—, æ˜¯å¦è¦copy</p>
</li>
<li><p><code>renamecols</code>: <code>cols &#61;&gt; functions</code>å½¢å¼ä¸­,è‡ªåŠ¨ç”Ÿæˆçš„ç»“æœåˆ—åå­—æ˜¯å¦è¦åŠ ä¸ŠåŸå§‹åˆ—çš„åå­—</p>
</li>
</ul>
<p>
</fieldset>

<p>ä¾‹å­: <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using DataFras, CSV, Statistics

fpath &#61; joinpath&#40;dirname&#40;pathof&#40;DataFrames&#41;&#41;, &quot;..&quot;, &quot;docs&quot;, &quot;src&quot;, &quot;assets&quot;, &quot;iris.csv&quot;&#41;;
iris &#61; CSV.read&#40;fpath, DataFrame&#41;
gdf &#61; groupby&#40;iris, :Species&#41;

combine&#40;gdf, :PetalLength &#61;&gt; mean&#41;
combine&#40;gdf, nrow&#41;
combine&#40;gdf, nrow, :PetalLength &#61;&gt; mean &#61;&gt; :mean&#41;
combine&#40;gdf, &#91;:PetalLength, :SepalLength&#93; &#61;&gt; &#40;&#40;p, s&#41; -&gt; &#40;a&#61;mean&#40;p&#41;/mean&#40;s&#41;, b&#61;sum&#40;p&#41;&#41;&#41;,
        AsTable&#41;
combine&#40;gdf, AsTable&#40;&#91;:PetalLength, :SepalLength&#93;&#41; &#61;&gt;
        x -&gt; std&#40;x.PetalLength&#41;/std&#40;x.SepalLength&#41;&#41;
combine&#40;x -&gt; std&#40;x.PetalLength&#41; / std&#40;x.SepalLength&#41;, gdf&#41;
combine&#40;gdf, 1:2 &#61;&gt; cor, nrow&#41;
combine&#40;gdf, :PetalLength &#61;&gt; &#40;x -&gt; &#91;extrema&#40;x&#41;&#93;&#41; &#61;&gt; &#91;:min, :max&#93;&#41;

select&#40;gdf, 1:2 &#61;&gt; cor&#41;
transform&#40;gdf, :Species &#61;&gt; x -&gt; chop.&#40;x, head&#61;5, tail&#61;0&#41;&#41;

# do block is supported, but sould be avoided because it is slow:
combine&#40;gdf&#41; do df
   &#40;m &#61; mean&#40;df.PetalLength&#41;, sÂ² &#61; var&#40;df.PetalLength&#41;&#41;
end

for subdf in groupby&#40;iris, :Species&#41;
    println&#40;size&#40;subdf, 1&#41;&#41;
end

for &#40;key, subdf&#41; in pairs&#40;groupby&#40;iris, :Species&#41;&#41;
    println&#40;&quot;Number of data points for &#36;&#40;key.Species&#41;: &#36;&#40;nrow&#40;subdf&#41;&#41;&quot;&#41;
end</code></pre>
<p><div class="code-lag">julia</div></fieldset></p>
<ul>
<li><p>groupbyç»“æœçš„keyæ˜¯<code>DataFrames.GroupKey</code>ç±»å‹, å¯ä»¥å½“ä½œæ˜¯ä¸€ç§<code>NamedTuple</code></p>
</li>
<li><p>groupbyå¯ä»¥å½“ä½œå¯¹DataFrameæ·»åŠ äº†æŸ¥æ‰¾ç´¢å¼•, å¯ä»¥é€šè¿‡<code>Tuple</code>æˆ–è€…<code>NamedTuple</code>æ¥å¿«é€Ÿè·³åˆ°æŒ‡å®šç´¢å¼•:</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;g&#61;repeat&#40;1:1000, inner&#61;5&#41;, x&#61;1:5000&#41;;
gdf &#61; groupby&#40;df, :g&#41;
gdf&#91;&#40;g&#61;500,&#41;&#93; # ç”¨ä¸€ä¸ªå…ƒç´ çš„NamedTuple, è·å–åˆ†ç»„æ˜¯500çš„è¡Œ
gdf&#91;&#91;&#40;500,&#41;, &#40;501,&#41;&#93;&#93; # ç”¨Vector&#123;NamedTuple&#125;, è·å–ä¸¤ä¸ªåˆ†ç»„</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p>ç”¨<code>valuecols</code>è·å–æ‰€æœ‰æ²¡åˆ†ç»„çš„åˆ—:</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">combine&#40;gdf, valuecols&#40;gdf&#41; .&#61;&gt; mean&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p><code>GroupedDataFrame</code>ä¸æ˜¯copy, è€Œæ˜¯view, æ‰€ä»¥å…¶çˆ¶DFçš„å¯¹åº”åˆ—ä¸èƒ½æ”¹å˜, ä¹Ÿä¸èƒ½æ”¹å˜è¡Œæ•°, å¦åˆ™è°ƒç”¨å­gdfæ—¶ä¼šæŠ¥é”™</p>
</li>
<li><p>å¦‚æœæƒ³çˆ¶DFçš„æ”¹åŠ¨ä¸å½±å“å­GDF, åˆ™è¦ç”¨çˆ¶dfçš„viewåˆ›å»ºgdf:<code>gdf &#61; groupby&#40;view&#40;df, :, :&#41;, :id&#41;</code></p>
</li>
<li><p><code>SubDataFrames</code>ç±»å‹å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿè·å¾—dfçš„å­é›†, å®ç°ç±»ä¼¼SQLçš„<code>where</code>åŠŸèƒ½:</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;a&#61;1:5&#41;
sdf &#61; @view df&#91;2:3, :&#93; # SubDataFrame type
transform&#40;sdf, :a &#61;&gt; ByRow&#40;string&#41;&#41; # åˆ›å»ºæ–°çš„DataFrame
transform&#33;&#40;sdf, :a &#61;&gt; ByRow&#40;string&#41;&#41; # æœ¬åœ°æ›´æ”¹sdf, ç±»å‹è¿˜æ˜¯SubDataFrame
df # æ›´æ”¹SubDataFrame, ä¼šå¯¹çˆ¶dfä¹Ÿä¸€æ ·æ›´æ”¹, è¿™é‡Œdfä¸­æ²¡æ“ä½œçš„è¡Œ, å¯¹åº”åˆ—å¡«å……missing
select&#33;&#40;sdf, :a &#61;&gt; -, renamecols&#61;false&#41; # å†æ“ä½œ, è¿™é‡ŒåŸåœ°æ“ä½œ
df</code></pre>
<p><div class="code-lag">julia</div></fieldset> ä¹Ÿå¯ä»¥å¯¹sdfè¿›è¡Œåˆ†ç»„ã€‚ </div>
<h3 id="reshapingå’Œpivoting_é•¿å®½è¡¨è½¬æ¢"><a href="#reshapingå’Œpivoting_é•¿å®½è¡¨è½¬æ¢" class="header-anchor"><code>Reshaping</code>å’Œ<code>Pivoting</code>: é•¿å®½è¡¨è½¬æ¢</a></h3>
<ul>
<li><p><code>stack</code>: å®½è¡¨å˜é•¿è¡¨, ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æå‡</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"> <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">stack&#40;iris, 1:4&#41; # æŠŠ1-4åˆ—å½“æˆvariable
stack&#40;iris, &#91;:SepalLength, :SepalWidth, :PetalLength, :PetalWidth&#93;&#41;
stack&#40;iris, Not&#40;:Species&#41;&#41;
# stackçš„ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šéœ€è¦é‡å¤çš„åˆ—&#40;æŒ‡ç¤ºåˆ—&#41;
stack&#40;iris, &#91;:SepalLength, :SepalWidth&#93;, :Species&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p><code>unstack</code>: é•¿è¡¨è½¬å®½è¡¨</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important"></p>
<pre><code class="language-julia">unstack&#40;df::AbstractDataFrame, rowkeys, colkey, value; renamecols::Function&#61;identity,
        allowmissing::Bool&#61;false, allowduplicates::Bool&#61;false, fill&#61;missing&#41;
unstack&#40;df::AbstractDataFrame, colkey, value; renamecols::Function&#61;identity,
        allowmissing::Bool&#61;false, allowduplicates::Bool&#61;false, fill&#61;missing&#41;
unstack&#40;df::AbstractDataFrame; renamecols::Function&#61;identity,
        allowmissing::Bool&#61;false, allowduplicates::Bool&#61;false, fill&#61;missing&#41;</code></pre>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">iris.id &#61; 1:size&#40;iris, 1&#41;
longdf &#61; stack&#40;iris, Not&#40;&#91;:Species, :id&#93;&#41;&#41;
unstack&#40;longdf, :id, :variable, :value&#41;
# å¦‚æœå‰©ä¸‹çš„colæ˜¯uniqueçš„, å¯ä»¥ä¸æä¾›id variable:
unstack&#40;longdf, :variable, :value&#41;
# ç”šè‡³å¯ä»¥ä¸æä¾›variableå’Œvalue:
unstack&#40;longdf&#41;
# æ·»åŠ view&#61;true, ä¸copyæ–°æ•°æ®, è€Œæ˜¯åˆ›å»ºåŸæ•°æ®çš„view, ä¼šèŠ‚çœå†…å­˜
stack&#40;iris, view&#61;true&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<ul>
<li><p><code>view&#61;true</code>æ—¶, ä¼šåˆ›å»ºå‡ ä¸ªå‘é‡: <code>EachRepeatedVector</code>å¯¹åº”<code>:variable</code>; <code>StackedVector</code>å¯¹åº”<code>:value</code>; <code>Repeatedvector</code> å¯¹åº”<code>ID cols</code></p>
</li>
</ul>
<p></div>
<ul>
<li><p><code>permnutedims</code>: åè½¬df <code>permutedims&#40;df, 1&#41;</code></p>
</li>
</ul>
<h3 id="æ’åº"><a href="#æ’åº" class="header-anchor">æ’åº</a></h3>
<p>ç›´æ¥è°ƒç”¨<code>sort/sort&#33;</code>, å¯é…åˆ<code>ref</code>,<code>by</code>å…³é”®è¯å’Œ<code>order</code>æ–¹æ³•ä½¿ç”¨</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">sort&#33;&#40;iris&#41; # æ¯åˆ—éƒ½é€çº§å‚ä¸æ’åº
sort&#33;&#40;iris, rev &#61; true&#41;
sort&#33;&#40;iris, &#91;:Species, :SepalWidth&#93;&#41; # æŒ‡å®šæ’åºçš„åˆ—
sort&#33;&#40;iris, &#91;order&#40;:Species, by&#61;length&#41;, order&#40;:SepalLength, rev&#61;true&#41;&#93;&#41; # æŒ‡å®šæ’åºæ–¹å¼
sort&#33;&#40;iris, &#91;:Species, :PetalLength&#93;, rev&#61;&#91;true, false&#93;&#41; # å¦ä¸€ç§æŒ‡å®šæ’åºæ–¹å¼çš„è¯­æ³•</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h3 id="åˆ†ç»„æ•°æ®"><a href="#åˆ†ç»„æ•°æ®" class="header-anchor">åˆ†ç»„æ•°æ®</a></h3>

<fieldset class="hadmon admon-note"><legend class="hadmon-legend admon-legend-note"> åˆ†ç»„æ•°æ®çš„å­˜å‚¨</legend>
  åœ¨æ•°æ®åˆ†æä¸­, æˆ‘ä»¬ç»å¸¸ä¼šéœ€è¦å¯¹æŸåˆ—æ•°æ®è¿›è¡Œåˆ†ç»„, åˆ†ç»„æ•°æ®é€šå¸¸æ˜¯ä¸€äº›å­—ç¬¦ä¸², åˆ†ç»„æ•°ç›®é€šå¸¸ä¸ä¼šå¤ªå¤š è¿™ç§æ—¶å€™, æˆ‘ä»¬å¯ä»¥å¯¹åˆ†ç»„æ•°æ®è¿›è¡Œé‡æ–°ç¼–ç &#40;æŠŠstringæ›¿æ¢æˆä¸€å †level&#41;, è¿™æ ·çš„å¥½å¤„æ˜¯<strong>å‡å°‘å†…å­˜</strong>ä¸” <strong>æ›´å®¹æ˜“ç”¨<code>groupby</code>æ“ä½œ</strong>, ç›®å‰æœ‰ä¸¤ç§ç±»å‹å¸®åŠ©å®ç°:</p>
<ul>
<li><p>æ¥è‡ªPooledArrays.jlåŒ…ä¸­çš„<code>PooledVector</code>, åªæ˜¯ç”¨æ¥å‡å°‘å­˜å‚¨</p>
</li>
<li><p>æ¥è‡ªCategoricalArrays.jlåŒ…ä¸­çš„<code>CategoricalVector</code>, è¿˜æä¾›å‡½æ•°å–å›åˆ†ç»„é¡ºåº, åœ¨åˆ†æå’Œç”»å›¾ä¸­å¾ˆæœ‰ç”¨ <span class="cadmon sadmon-tip">è¿™ä¸ªæ›´æ´»è·ƒä¸€ç‚¹, åº”ç”¨èŒƒå›´ä¹Ÿæ›´å¹¿</span></p>
</li>
</ul>
<p>
<fieldset class="admon admon-todo">
<legend class="admon-legend admon-legend-todo"> Todo</legend>
  æ‹“å±•å­¦ä¹ <a href="https://categoricalarrays.juliadata.org/stable/">CategoricalArrays.jl</a> 
</fieldset>
 
</fieldset>

<h3 id="ç¼ºå¤±å€¼_missing"><a href="#ç¼ºå¤±å€¼_missing" class="header-anchor">ç¼ºå¤±å€¼: Missing</a></h3>
<ul>
<li><p><code>Missing</code>ç±»å‹çš„å”¯ä¸€å®ä¾‹æ˜¯<code>missing</code></p>
</li>
<li><p><code>skipmissing&#40;x&#41;</code>æ–¹æ³•å¯ä»¥è¿‡æ»¤æ‰xä¸­missingçš„å€¼, è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨</p>
</li>
<li><p><code>coalesce</code>å¯ä»¥ç”¨æ¥æ›¿æ¢missingä¸ºå…¶ä»–å€¼: <code>coalesce.&#40;x, 0&#41;</code>, è¯¥æ–¹æ³•æ˜¯é’ˆå¯¹æŒ‡å®šå€¼çš„, æ‰€ä»¥å¯¹å‘é‡è¦å¹¿æ’­</p>
</li>
<li><p><code>dropmissing/dropmissing&#33;</code>: å»æ‰dfä¸­æœ‰missingçš„è¡Œ, <code>dropmissing&#40;df, :x&#41;</code>æŒ‡å®šè¡Œ, è®¾ç½®<code>disallowmissing&#61;true</code>å‚æ•°è®©è¾“å‡ºçš„dfä¸æ”¯æŒmissing</p>
</li>
<li><p><code>allowmissing&#91;&#33;&#93;</code>å’Œ<code>disallowmissing&#91;&#33;&#93;</code>: æŠŠæŒ‡å®šdf&#40;çš„æŒ‡å®šåˆ—&#41;æ”¹æˆæ”¯æŒ/ä¸æ”¯æŒ<code>missing</code></p>
</li>
<li><p><strong>Missings.jl</strong>åŒ…æä¾›äº†ä¸€å †ä¸“é—¨å¤„ç†ç¼ºå¤±å€¼çš„å‡½æ•°, å…¶ä¸­ä¸€ä¸ª<code>passmissing&#40;func&#41;</code>å¯ä»¥è·³è¿‡ç”¨missingæ‰§è¡Œ<code>func</code>, è¿˜æœ‰<code>Missing.replace</code>, <code>nonmissingtype</code>, <code>missings&#40;N&#41;</code>ç­‰, è¿™é‡Œä¸å±•å¼€äº†</p>
</li>
</ul>
<h3 id="æ‰©å±•åŒ…_dataframesmetajl"><a href="#æ‰©å±•åŒ…_dataframesmetajl" class="header-anchor">æ‰©å±•åŒ…: DataFramesMeta.jl</a></h3>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ <a href="https://juliadata.github.io/DataFramesMeta.jl/stable/">HERE</a></p>
</blockquote>

<fieldset class="hadmon admon-hack"><legend class="hadmon-legend admon-legend-hack"> æ‹“å±•DataFrames.jl</legend>
 <code>DataFrames.jl</code>ä¸­çš„<code>select</code>, <code>transform</code>å’Œ<code>combine</code>ç­‰æ–¹æ³•å¾ˆå¼º, ä½†æ˜¯é€»è¾‘ä¸Šæœ‰æ—¶å€™ç•¥æ˜¾ç¹ç, å—Rä¸­<code>dplyr</code>å’ŒC#ä¸­<code>LINQ</code>çš„å¯å‘, <code>DataFramesMeta.jl</code>æä¾›äº†è¿™äº›æ–¹æ³•çš„é•œåƒå®, å¯ä»¥ç”¨æ›´ç®€æ´çš„è¯­æ³•æ¥æ“ä½œã€‚é™¤æ­¤ä¹‹å¤–, <code>DataFramesMeta.jl</code>è¿˜æä¾›äº†å…¶ä»–å®æ“ä½œ, å¦‚<code>@orderby, @subset&#91;&#33;&#93;, @r&#91;transform,select,orderby,subset&#93;, @by, @with, @eachrow, @byrow, @passmissing, @astable, @chain</code>ç­‰ã€‚</p>
<p><div class="aadmon aadmon-todo"> æœ€æ–°ç‰ˆçš„<code>DataFrames.jl</code>ä¸­æä¾›äº†<code>Between, All, Cols, Not</code>ç­‰åˆ—æ“ä½œ, è¿™äº›åœ¨<code>DataFramesMeta.jl</code>ä¸­æš‚ä¸æ”¯æŒã€‚</div> 
</fieldset>

<h4 id="select"><a href="#select" class="header-anchor"><code>@select&#91;&#33;&#93;</code></a></h4>
<ul>
<li><p><code>@select</code>è¿”å›æ–°çš„DF, æ¯åˆ—éƒ½æ˜¯é‡æ–°åˆ†é…å†…å­˜çš„</p>
</li>
<li><p><code>@select&#33;</code>ç›´æ¥æ“ä½œåŸDF</p>
</li>
<li><p>ç›¸æ¯”<code>select</code>, é‡‡ç”¨äº†æ›´ç®€æ´çš„è¯­æ³•: <code>:y &#61; f&#40;:x&#41;</code></p>
</li>
</ul>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;x &#61; &#91;1, 1, 2, 2&#93;, y &#61; &#91;1, 2, 101, 102&#93;&#41;;
gdf &#61; groupby&#40;df, :x&#41;;
@select&#40;df, :x, :y&#41;
@select&#40;df, :x2 &#61; 2 * :x, :y&#41;
@select&#40;gdf, :x2 &#61; 2 .* :y .* first&#40;:y&#41;&#41;
@select&#33;&#40;df, :x, :y&#41;
@select&#33;&#40;df, :x &#61; 2 * :x, :y&#41;
@select&#33;&#40;gdf, :y &#61; 2 .* :y .* first&#40;:y&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="transform"><a href="#transform" class="header-anchor"><code>@transform&#91;&#33;&#93;</code></a></h4>
<p>é€»è¾‘ä¸<code>@select</code>ç±»ä¼¼:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">@transform&#40;df, :x2 &#61; 2 * :x, :y&#41;
@transform&#40;gdf, :x2 &#61; 2 .* :y .* first&#40;:y&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="subset"><a href="#subset" class="header-anchor"><code>@subset&#91;&#33;&#93;</code></a></h4>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using Statistics
outside_var &#61; 1;
@subset&#40;df, :x .&gt; 1&#41;
@subset&#40;df, :x .&gt; outside_var&#41;
@subset&#40;df, :x .&gt; outside_var, :y .&lt; 102&#41; # ä¸¤ä¸ªæ¡ä»¶æ˜¯ and çš„å…³ç³»
@subset&#40;gdf, :x .&gt; mean&#40;:x&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="combine"><a href="#combine" class="header-anchor"><code>@combine</code></a></h4>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">@combine&#40;gdf, :x2 &#61; sum&#40;:y&#41;&#41;
@combine&#40;gd, :x2 &#61; :y .- sum&#40;:y&#41;&#41;
@combine&#40;gd, &#36;AsTable &#61; &#40;n1 &#61; sum&#40;:y&#41;, n2 &#61; first&#40;:y&#41;&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>æ³¨æ„æœ€åä¸€ä¸ªä¾‹å­ä¸­ç”¨<code>&#36;</code>è½¬ä¹‰è¡¨æ˜è¾“å‡ºæ˜¯ä¸€ä¸ª<code>Table</code>æ ¼å¼, <code>&#36;</code>è½¬ä¹‰çš„å…·ä½“ç”¨æ³•å°†åœ¨<a href="#<code>&#36;</code>è½¬ä¹‰">ä¸‹æ–‡</a>è¯´æ˜ã€‚</p>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
 <code>@combine</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æ˜¯DFæˆ–GDF, è€Œ<code>combine</code>å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°, è€ŒæŠŠGDFå½“ä½œç¬¬äºŒä¸ªå‚æ•°:</p>
<p><fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia"># ä¸æ”¯æŒçš„:
@combine&#40;&#40;a&#61;sum&#40;:x&#41;, b&#61;sum&#40;:y&#41;&#41;, gdf&#41;
# æ”¯æŒ:
@combine&#40;gdf, &#36;AsTable &#61; &#40;a &#61; sum&#40;:x&#41;, b &#61; sum&#40;:y&#41;&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset> 
</fieldset>

<h4 id="orderby"><a href="#orderby" class="header-anchor"><code>@orderby</code></a></h4>
<p><code>@orderby</code>å¯¹DFçš„å¤šåˆ—è¿›è¡Œæ’åº, <span class="cadmon sadmon-error">åªæ”¯æŒ<code>DataFrame</code>, ä¸æ”¯æŒ<code>GroupedDataFrame</code></span>ã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">@orderby&#40;df, -1 .* :x&#41;
@orderby&#40;df, :x, :y .- mean&#40;:y&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="with"><a href="#with" class="header-anchor"><code>@with</code></a></h4>
<p><code>@with df</code> åè¾¹è·Ÿç€çš„ä»£ç å—ä¸­å‡ºç°çš„æ‰€æœ‰<code>Symbol</code>ç±»å‹éƒ½ä¼šè¢«è§£ææˆæ˜¯dfå¯¹åº”åˆ—çš„æ•°ç»„, è¿™æ ·éœ€è¦å¯¹ä¸€ä¸ªdfçš„å¾ˆå¤šåˆ—åšä¸€ç³»åˆ—ä¸‹æ¸¸è®¡ç®—çš„æ—¶å€™, å°±å¯ä»¥ä¸ç”¨é‡å¤å†™<code>df.colname</code>äº†, å¾ˆæ–¹ä¾¿:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;x &#61; 1:3, y &#61; &#91;2, 1, 2&#93;&#41;
x &#61; &#91;2, 1, 0&#93;

@with&#40;df, :y .&#43; 1&#41;
@with&#40;df, :x &#43; x&#41;

x &#61; @with df begin
    res &#61; 0.0
    for i in 1:length&#40;:x&#41;
        res &#43;&#61; :x&#91;i&#93; * :y&#91;i&#93;
    end
    res
end

# ç”¨^&#40;&#41;åŒ…è£¹çš„Symbolsä¸ä¼šè¢«å±•å¼€æˆæ•°ç»„
@with&#40;df, df&#91;:x .&gt; 1, ^&#40;:y&#41;&#93;&#41;
# ä¸Šè¾¹è¿™ä¸ªç»“æœç­‰ä»·äº:
df&#91;&#91;1,2,3&#93; .&gt; 1, :y&#93;
# :x è¢«å±•å¼€äº†, :y æ²¡æœ‰</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
 <code>@with</code>ä¼šç”Ÿæˆä¸€ä¸ªå‡½æ•°, æ‰€ä»¥<code>@with</code>å†…éƒ¨å®šä¹‰çš„å˜é‡æ˜¯<strong>å±€éƒ¨å˜é‡</strong>. åœ¨<code>@with</code>ä»£ç å—å†…éƒ¨ç»™å…¶å¤–éƒ¨å˜é‡èµ‹å€¼æ—¶, éœ€ä¸éœ€è¦æ·»åŠ <code>global</code>å…³é”®å­—å–å†³äºå…¶å¤–éƒ¨ä»£ç å—çš„å±æ€§:</p>
<ul>
<li><p>å¦‚æœå¤–éƒ¨ä»£ç å—æ˜¯<strong>å…¨å±€</strong>çš„, åˆ™<code>@with</code>å†…éƒ¨<strong>éœ€è¦</strong>æ·»åŠ <code>global</code>å…³é”®å­—æ‰èƒ½ä½¿ç”¨è¯¥å˜é‡;</p>
</li>
<li><p>å¦‚æœå¤–éƒ¨ä»£ç å—æ˜¯<strong>å±€éƒ¨</strong>çš„&#40;å‡½æ•°å†…æˆ–è€…<code>let</code>è¯­å¥å—å†…&#41;, åˆ™<strong>ä¸éœ€è¦</strong>æ·»åŠ <code>global</code>;</p>
</li>
</ul>
<p>
</fieldset>


<fieldset class="admon admon-warn">
<legend class="admon-legend admon-legend-warn"> Warn</legend>
  å› ä¸º<code>@with</code>ä¼šç”Ÿæˆå‡½æ•°, æ‰€ä»¥åœ¨ä½¿ç”¨<code>return</code>çš„æ—¶å€™è¦å°å¿ƒ: <fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">function data_transform&#40;df; returnearly &#61; true&#41;
    if returnearly
        @with df begin
            z &#61; :x &#43; :y
            return z
        end
    else
        return &#91;1, 2, 3&#93;
    end

    return &#91;4, 5, 6&#93;
end</code></pre>
<p><div class="code-lag">julia</div></fieldset> ä»¥ä¸Šå‡½æ•°ä¼šè¿”å›<code>&#91;4, 5, 6&#93;</code>, å› ä¸º<code>@with</code>å†…éƒ¨çš„<code>return</code>æ˜¯å±äº<code>@with</code>ç”Ÿæˆçš„åŒ¿åå‡½æ•°çš„, ä¸æ˜¯<code>data_transform</code>çš„ã€‚æ¥ä¸‹æ¥å°†è¦ä»‹ç»çš„<code>@eachrow</code>æ˜¯åŸºäº<code>@with</code>å®ç°çš„, æ‰€ä»¥ä¹ŸåŒæ ·éœ€è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚ 
</fieldset>

<h4 id="eachrow"><a href="#eachrow" class="header-anchor"><code>@eachrow&#91;&#33;&#93;</code></a></h4>
<p>é€è¡Œæ“ä½œDFå¹¶è¿”å›æ“ä½œåçš„DFçš„æ¯è¡Œ, æ”¯æŒæ§åˆ¶æµå’Œ<code>begin end</code>ä»£ç å—ã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;A &#61; 1:3, B &#61; &#91;2, 1, 2&#93;&#41;
df2 &#61; @eachrow df begin
    :A &#61; :B &#43; 1
end</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>ç±»ä¼¼<code>@with</code>, ç”±äº<code>@eachrow</code>ç”Ÿæˆä¸€ä¸ªå‡½æ•°ä»£ç å—, æ‰€ä»¥è¦å¼•ç”¨å¤–éƒ¨å˜é‡æ—¶, éœ€è¦ç”¨<code>let</code>ä»£ç å—åŒ…è£¹, æˆ–è€…ç”¨<code>global</code>å…³é”®å­—&#40;æ¨èç”¨<code>let</code>, æ›´æ˜“æ‡‚&#41;:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;A &#61; 1:3, B &#61; &#91;2, 1, 2&#93;, C &#61; &#91;-4,2,1&#93;&#41;

# ç”¨letåŒ…è£¹, è®©xæˆä¸ºå±€éƒ¨å˜é‡
let x &#61; 0.0
    @eachrow df begin
        if :A &lt; :B
            x &#43;&#61; :A * :C
        end
    end
    x
end # x &#61; -4.0

# yæ˜¯å…¨å±€å˜é‡, åœ¨@eachrowå†…è¦ç”¨globalå…³é”®å­—
y &#61; 0.0
@eachrow df begin
    if :A &lt; :B
        global y &#43;&#61; :A * :C
    end
end;
y # y &#61; -4.0</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="hadmon admon-hack"><legend class="hadmon-legend admon-legend-hack"> @eachrowçš„ç‰¹æ®Šç”¨æ³•:@newcol</legend>
  åœ¨<code>@echorow</code>ä¸­, å¯ä»¥ç”¨<code>@newcol</code>å®&#40;è¯­æ³•:<code>@newcol :x::Vector&#123;T&#125;</code>&#41;æ¥åˆ†é…æ–°çš„ç±»å‹ä¸º<code>T</code>çš„åˆ—:</p>
<p><fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;A &#61; 1:3, B &#61; &#91;2, 1, 2&#93;&#41;
df2 &#61; @eachrow df begin
    @newcol :colX::Vector&#123;Float64&#125;
    @newcol :colY::Vector&#123;Union&#123;Int, Missing&#125;&#125;
    @newcol :colZ::Vector&#123;String&#125;
    :colX &#61; :B &#61;&#61; 2 ? pi * :A : :B
    if :A &gt; 1
        :colY &#61; :A * :B
    else
        :colY &#61; missing
    end
    :colZ &#61; string&#40;:A&#41;
end</code></pre>
<p><div class="code-lag">julia</div></fieldset> 
</fieldset>

<h4 id="byrowå’Œr_é€è¡Œæ•°æ®è½¬æ¢"><a href="#byrowå’Œr_é€è¡Œæ•°æ®è½¬æ¢" class="header-anchor"><code>@byrow</code>å’Œ<code>@r...</code>: é€è¡Œæ•°æ®è½¬æ¢</a></h4>
<p><code>@byrow</code>å¯ä»¥æ–¹ä¾¿åœ°å¯¹dfé€è¡Œæ“ä½œ, <code>DataFramesMeta.jl</code>ä¸­ä¸€ç³»åˆ—çš„è¡Œæ“ä½œå®éƒ½æ˜¯åŸºäº<code>@byrow</code>çš„:</p>
<ul>
<li><p><code>@rtransform</code>, <code>@rtransform&#33;</code></p>
</li>
<li><p><code>@rselect</code>, <code>@rselect&#33;</code></p>
</li>
<li><p><code>@rorderby</code></p>
</li>
<li><p><code>@rsubset</code>, <code>@rsubset&#33;</code></p>
</li>
</ul>
<p>åœ¨<code>DataFram.jl</code>ä¸­, æœ‰<code>ByRow</code>å‡½æ•°, å¯ä»¥å½“ä½œæ˜¯æŒ‰è¡Œå¹¿æ’­æ“ä½œ: <code>ByRow&#40;f&#41;&#40;x, y&#41;</code> â‰ˆ <code>f.&#40;x, y&#41;</code>ã€‚<code>@byrow</code>å¯ä»¥ç†è§£æˆåœ¨<code>DataFramesMeta.jl</code>çš„å®ä¸­ä½¿ç”¨çš„<code>ByRow</code>ã€‚</p>
<div class="aadmon aadmon-warn"> <code>@byrow</code>ä¸æ˜¯çœŸæ­£çš„å®, ä¸èƒ½ç”¨äº<code>DataFramesMeta.jl</code>çš„å®ä¹‹å¤–ã€‚</p>
<p><fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">#ä»¥ä¸‹ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„:
@transform&#40;df, @byrow :y &#61; :x &#61;&#61; 1 ? true : false&#41;
transform&#40;df, :x &#61;&gt; ByRow&#40;x -&gt; x &#61;&#61; 1 ? true : false&#41; &#61;&gt; :y&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset></div>
<p>ä¸ºäº†é¿å…å¤šæ¬¡æ“ä½œæ—¶é‡å¤å†™<code>@byrow</code>, å¯ä»¥æŠŠ<code>@byrow</code>å†™åœ¨ä»£ç å—çš„å¼€å¤´, åˆ™ä»£ç å—ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€è¡Œçš„äº†:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">@subset df @byrow begin
    :a &gt; 1 
    :b &lt; 5
end</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
 <code>@byrow</code>ä¹Ÿå¯ä»¥ç”¨äº<code>GroupedDataFrame</code>, ä½†æ˜¯ä¸<code>ByRow</code>ç±»ä¼¼, åœ¨ç”¨ç»™GDFä¸­, åˆ†ç»„ä¿¡æ¯æ˜¯ä¸ä¼šè¢«è€ƒè™‘çš„:</p>
<pre><code class="language-julia"># ä»¥ä¸‹ä»£ç æ˜¯ç­‰ä»·çš„:
@transform&#40;df, @byrow :y &#61; f&#40;:x&#41;&#41;
@transform&#40;groupby&#40;df, :g&#41;, @byrow :y &#61; f&#40;:x&#41;&#41;</code></pre>
<p>
</fieldset>

<h4 id="ç”¨passmissingå¹¿æ’­missing"><a href="#ç”¨passmissingå¹¿æ’­missing" class="header-anchor">ç”¨<code>@passmissing</code>å¹¿æ’­missing</a></h4>
<p>å¾ˆå¤šJuliaä¸­çš„å‡½æ•°æ˜¯ä¸æ”¯æŒmissingçš„å¹¿æ’­çš„&#40;å¦‚<code>parse&#40;Int, missing&#41;</code>ä¼šæŠ¥é”™&#41;ã€‚ <code>Missing.jl</code>åŒ…ä¸­æä¾›äº†<code>passmissing</code>å‡½æ•°æ¥å¤„ç†missingã€‚ç›¸åº”åœ°, <code>DataFramesMeta.jl</code>ä¸­æä¾›äº†<code>@passmissing</code>å®æ¥åœ¨å…¶ä»–å®æ“ä½œä¸­æ”¯æŒmissingã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">#ä»¥ä¸‹ä»£ç æ˜¯ç­‰ä»·çš„:
@transform df @byrow @passmissing :c &#61; f&#40;:a, :b&#41;
transform&#40;df, &#91;:a, :b&#93; &#61;&gt; ByRow&#40;passmissing&#40;f&#41;&#41; &#61;&gt; :c&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>æ›´å…·ä½“çš„ä¾‹å­:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; no_missing&#40;x::Int, y::Int&#41; &#61; x &#43; y;

julia&gt; df &#61; DataFrame&#40;a &#61; &#91;1, 2, missing&#93;, b &#61; &#91;4, 5, 6&#93;&#41;
3Ã—2 DataFrame
 Row â”‚ a        b
     â”‚ Int64?   Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚       1      4
   2 â”‚       2      5
   3 â”‚ missing      6

julia&gt; @transform df @passmissing @byrow :c &#61; no_missing&#40;:a, :b&#41;
3Ã—3 DataFrame
 Row â”‚ a        b      c
     â”‚ Int64?   Int64  Int64?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚       1      4        5
   2 â”‚       2      5        7
   3 â”‚ missing      6  missing

julia&gt; df &#61; DataFrame&#40;x_str &#61; &#91;&quot;1&quot;, &quot;2&quot;, missing&#93;&#41;
3Ã—1 DataFrame
 Row â”‚ x_str
     â”‚ String?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ 1
   2 â”‚ 2
   3 â”‚ missing

julia&gt; @rtransform df @passmissing :x &#61; parse&#40;Int, :x_str&#41;
3Ã—2 DataFrame
 Row â”‚ x_str    x
     â”‚ String?  Int64?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ 1              1
   2 â”‚ 2              2
   3 â”‚ missing  missing</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="astableå’ŒastableåŒæ—¶åˆ›å»ºå¤šåˆ—"><a href="#astableå’ŒastableåŒæ—¶åˆ›å»ºå¤šåˆ—" class="header-anchor"><code>@astable</code>å’Œ<code>AsTable</code>åŒæ—¶åˆ›å»ºå¤šåˆ—</a></h4>
<ul>
<li><p><code>@astable</code></p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important">  åœ¨éœ€è¦ç”¨<span class="cadmon sadmon-tip">åŒä¸€å¥—æ“ä½œé€»è¾‘ç”Ÿæˆå¤šåˆ—å˜é‡</span>çš„åœºæ™¯, å¯ä»¥ç”¨<code>@astable</code>:</p>
<p><fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">julia&gt; df &#61; DataFrame&#40;a &#61; &#91;1, 2, 3&#93;, b &#61; &#91;400, 500, 600&#93;&#41;;

julia&gt; @transform df @astable begin 
           ex &#61; extrema&#40;:b&#41;
           :b_first &#61; :b .- first&#40;ex&#41;
           :b_last &#61; :b .- last&#40;ex&#41;
       end
3Ã—4 DataFrame
 Row â”‚ a      b      b_first  b_last 
     â”‚ Int64  Int64  Int64    Int64  
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚     1    400        0    -200
   2 â”‚     2    500      100    -100
   3 â”‚     3    600      200       0</code></pre>
<p><div class="code-lag">julia</div></fieldset> </div>
<ul>
<li><p><code>AsTable</code>åœ¨è¡¨è¾¾å¼å³ä¾§çš„æ“ä½œ</p>
</li>
</ul>
<div class="indent-block" style="margin-left: 2em !important">  ä¹Ÿå¯ä»¥ç”¨<code>AsTable&#40;cols&#41;</code>åŒæ—¶å¯¹å¤šåˆ—æ“ä½œ, å½“æŠŠAsTableç”¨åœ¨è¡¨è¾¾å¼å³è¾¹çš„æ—¶å€™:</p>
<ul>
<li><p><span class="cadmon sadmon-warn">å¦‚æœä½¿ç”¨äº†<code>AsTable&#40;cols&#41;</code>, å°±ä¸è¦åœ¨ä»£ç å—ä¸­å†å¼•ç”¨å…¶ä»–åˆ—äº†</span></p>
</li>
<li><p><code>AsTable</code>æ”¯æŒé…åˆ<code>Not, Between, r&quot;&quot;</code>ç­‰ä½¿ç”¨</p>
</li>
<li><p><code>AsTable</code>å†…éƒ¨çš„ä¸œè¥¿éƒ½æ˜¯è¢«å¼ºåˆ¶è½¬ä¹‰çš„, æ‰€ä»¥ä¸éœ€è¦åœ¨å…¶å†…éƒ¨ä½¿ç”¨ç”¨<code>&#36;</code></p>
</li>
</ul>
<pre><code class="language-julia">df &#61; DataFrame&#40;a &#61; &#91;11, 14&#93;, b &#61; &#91;17, 10&#93;, c &#61; &#91;12, 5&#93;&#41;;
vars &#61; &#91;&quot;a&quot;, &quot;b&quot;&#93;;

@rtransform df :y &#61; sum&#40;AsTable&#40;vars&#41;&#41;
@rtransform df :y &#61; sum&#40;AsTable&#40;&#91;:a, :b&#93;&#41;&#41;

# AsTableè¿˜æ”¯æŒç”¨å˜é‡çš„åå­—è¿›è¡Œæ“ä½œ
function fun_with_new_name&#40;x::NamedTuple&#41;
    nms &#61; string.&#40;propertynames&#40;x&#41;&#41;
    new_name &#61; Symbol&#40;join&#40;nms, &quot;_&quot;&#41;, &quot;_sum&quot;&#41;
    s &#61; sum&#40;x&#41;
    &#40;; new_name &#61;&gt; s&#41; # &#40;; &#41; &#61;&gt; å®šä¹‰å…·åå…ƒç»„
end

@rtransform df &#36;AsTable &#61; fun_with_new_name&#40;AsTable&#40;&#91;:a, :b&#93;&#41;&#41;

@rsubset df sum&#40;AsTable&#40;vars&#41;&#41; &gt; 25

:y &#61; first&#40;AsTable&#40;&quot;a&quot;&#41;&#41; # AsTableå†…éƒ¨å¼ºåˆ¶è½¬ä¹‰</code></pre>
<p>
<fieldset class="hadmon admon-note"><legend class="hadmon-legend admon-legend-note"> å¦‚ä½•ç†è§£AsTableçš„å·¥ä½œåŸç†?</legend>
  ä¸Šè¾¹ä»‹ç»äº†<code>DataFrames.jl</code>ä¸­å¯ä»¥å½“ä½œ<code>source</code>, è¿›è¡Œ<code>source &#61;&gt; fun &#61;&gt; dest</code>è¿™ç§æ“ä½œã€‚<br>åœ¨<code>DataFramesMeta.jl</code>ä¸­, <code>:y &#61; f&#40;AsTable&#40;cols&#41;&#41;</code>ä¼šè¢«ç¿»è¯‘æˆ<code>AsTable&#40;cols&#41; &#61;&gt; f &#61;&gt; :y</code>, æ‰€ä»¥, åœ¨ç”¨<code>:y &#61; fun</code>çš„æ“ä½œæ—¶, ä¸èƒ½æ··ç”¨<code>AsTable</code>å’Œ<code>:col_id</code>:<br> <code>:y &#61; sum&#40;AsTable&#40;cols&#41;&#41; &#43; :d</code> ä¼šæŠ¥é”™ã€‚ 
</fieldset>
 </div>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> ğŸ“˜ `AsTable` å’Œ `@astable`</legend>
  ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬çœ‹åˆ°<code>AsTable</code>å’Œ<code>@astable</code>å‡ºç°çš„ä¸‰ç§åœºåˆ:</p>
<ol>
<li><p>è¡¨è¾¾å¼å·¦è¾¹: <code>&#36;AsTable &#61; f&#40;:a, :b&#41;</code></p>
</li>
<li><p>åœ¨è¡¨è¾¾å¼å†…ç”¨<code>@astable</code></p>
</li>
<li><p>è¡¨è¾¾å¼å³è¾¹: <code>AsTable&#40;cols&#41;</code></p>
</li>
</ol>
<p>è¿™ä¸‰ç§ç”¨æ³•çš„åŒºåˆ«æ€»ç»“å¦‚ä¸‹:</p>
<table><tr><th align="right">æ“ä½œ</th><th align="left">ç›®çš„</th><th align="right">æ³¨æ„</th></tr><tr><td align="right">å·¦ä¾§çš„<code>&#36;AsTable</code></td><td align="left">æ‰¹é‡<strong>åˆ›å»º</strong>å¤šåˆ—, è¿™äº›åˆ—çš„åå­—æ˜¯æ ¹æ®è„šæœ¬ç”Ÿæˆçš„&#40;ä¸æå‰çŸ¥é“&#41;</td><td align="right">éœ€è¦<code>&#36;</code>è½¬ç§»</td></tr><tr><td align="right"><code>@astable</code></td><td align="left">æ‰¹é‡<strong>åˆ›å»º</strong>å¤šåˆ—, è¿™äº›åˆ—åå­—æå‰å·²çŸ¥</td><td align="right"></td></tr><tr><td align="right">å³ä¾§çš„<code>AsTable</code></td><td align="left">åŒæ—¶<strong>å¤„ç†</strong>å¤šåˆ—</td><td align="right">éœ€è¦è¾“å…¥åˆ—å</td></tr></table>
<p>
</fieldset>

<h4 id="ç”¨è½¬ä¹‰"><a href="#ç”¨è½¬ä¹‰" class="header-anchor">ç”¨<code>&#36;</code>è½¬ä¹‰</a></h4>
<p>åœ¨<code>DataFrameMeta.jl</code>ä¸­, ç”¨<code>&#36;</code>å……å½“DFçš„åˆ—åå˜é‡çš„è½¬ä¹‰ç¬¦, å˜é‡å­˜å‚¨çš„å€¼å¯ä»¥æ˜¯<code>Symbol</code>æˆ–<code>String</code><span class="cadmon sadmon-todo">æˆ–<code>Int</code>è¡¨ç¤ºåˆ—å·&#40;æœ‰é™åˆ¶&#41;</span>, ä¹Ÿå¯ä»¥ç›´æ¥å¯¹å­—é¢é‡è¿›è¡Œè½¬ä¹‰ã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;A &#61; 1:3, B &#61; &#91;2, 1, 2&#93;&#41;

nameA &#61; :A
nameA_string &#61; &quot;A&quot;
df2 &#61; @transform&#40;df, :C &#61; :B - &#36;nameA&#41;
df2 &#61; @transform&#40;df, :C &#61; :B - &#36;nameA_string&#41;
df2 &#61; @transform&#40;df, :C &#61; :B - &#36;&quot;A&quot;&#41;
df2 &#61; @transform&#40;df, :C &#61; :B - &#36;:A&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p><code>&#36;</code>ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºæ–°åˆ—:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61; DataFrame&#40;A &#61; 1:3, B &#61; &#91;2, 1, 2&#93;&#41;

newcol &#61; &quot;C&quot;
@select&#40;df, &#36;newcol &#61; :A &#43; :B&#41;

@by&#40;df, :B, &#36;&#40;&quot;A complicated&quot; * &quot; new name&quot;&#41; &#61; first&#40;:A&#41;&#41;

nameC &#61; &quot;C&quot;
df3 &#61; @eachrow df begin
    @newcol &#36;nameC::Vector&#123;Int&#125;
    &#36;nameC &#61; :A
end</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>å½“ç”¨<code>&#36;</code>è½¬ä¹‰<code>Int</code>æ—¶, æœ‰é™åˆ¶: <span class="cadmon sadmon-todo">ä¸å…è®¸æ··åˆä½¿ç”¨<code>Int</code>çš„è½¬ä¹‰å’Œå…¶ä»–ç±»å‹çš„åˆ—åè¡¨ç¤º</span>:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">@transform&#40;df, :y &#61; &#36;1 &#43; &#36;2&#41; # æ­£å¸¸
@transform&#40;df, :y &#61; :A &#43; &#36;2&#41; # æŠ¥é”™

# æœ¬è´¨ä¸Šæ˜¯å› ä¸ºDataFrameåœ¨&#96;source &#61;&gt; fun &#61;&gt; dest&#96;è¡¨è¾¾å¼ä¸­, è¦æ±‚&#96;source&#96;å¿…é¡»æ˜¯åŒä¸€ç§ç±»å‹:
transform&#40;df, &#91;:A, :B&#93; &#61;&gt; &#40;&#43;&#41; &#61;&gt; :y&#41;  # æ­£å¸¸
transform&#40;df, &#91;:A, &quot;B&quot;&#93; &#61;&gt; &#40;&#43;&#41; &#61;&gt; :y&#41; # æŠ¥é”™</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-note">
<legend class="admon-legend admon-legend-note"> Note</legend>
  ä¸ºäº†ä¿æŒä¸€è‡´, <code>@with</code>å’Œ<code>@eachrow</code>ä¹Ÿæœ‰è¿™ç§é™åˆ¶: æ•´æ•°å¼•ç”¨<code>&#36;1, &#36;2</code>ä¸èƒ½ä¸<code>Symbol</code>æˆ–è€…<code>String</code>ç±»å‹çš„åˆ—å¼•ç”¨å…±åŒä½¿ç”¨ã€‚ 
</fieldset>

<p>è¢«<code>&#36;&#40;&#41;</code>åŒ…è£¹çš„å‡½æ•°ä¼š<span class="sadmon sadmon-warn">ç»•è¿‡</span>DataFramesMeta.jlçš„åŒ¿åå‡½æ•°, ç›´æ¥ä¼ é€’ç»™<code>DataFrames.jl</code>çš„å‡½æ•°ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—<code>src &#61;&gt; func &#61;&gt; dest</code>å¯ä»¥é€šè¿‡<code>&#36;&#40;&#41;</code>åŒ…è£¹, ç”¨åœ¨<code>DataFramesMeta.jl</code>çš„å®æ“ä½œä¸­:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using Statistics

df &#61; DataFrame&#40;a &#61; &#91;1, 2&#93;, b &#61; &#91;30, 40&#93;&#41;;
@transform df &#36;&#40;&#91;:a, :b&#93; .&#61;&gt; &#91;sum mean&#93;&#41;

# ä¹Ÿå¯ä»¥é€šè¿‡å˜é‡ä¼ é€’:
my_transformation &#61; :a &#61;&gt; &#40;t -&gt; t .&#43; 100&#41; &#61;&gt; :c;
@transform df begin
    &#36;my_transformation
    :d &#61; :b .&#43; 200
end</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<p>åˆ©ç”¨<code>&#36;</code>å¯ä»¥åœ¨å®æ“ä½œä¸­æ–¹ä¾¿åœ°é€‰æ‹©å¤šåˆ—:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">select&#40;df, &#91;:a, :b&#93;&#41;
@select df &#36;&#91;:a, :b&#93;

select&#40;df, r&quot;^a&quot;&#41;
@select df &#36;&#40;r&quot;^a&quot;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>

<fieldset class="admon admon-warn">
<legend class="admon-legend admon-legend-warn"> Warn</legend>
</p>
<ul>
<li><p>ç”¨<code>&#36;&#40;&#41;</code>è¿›è¡Œå¤šå‚æ•°é€‰æ‹©çš„æ—¶å€™, å¿…é¡»ä¿è¯æ‰€æœ‰çš„å‚æ•°éƒ½è¢«<code>&#36;&#40;&#41;</code>åŒ…è£¹: <code>@select df :y &#61; f&#40;&#36;&#91;:a, :b&#93;&#41;</code>ä¼šæŠ¥é”™ã€‚</p>
</li>
<li><p><code>DataFrame.jl</code>ä¸­ä¸æ”¯æŒå¤šåˆ—é€‰æ‹©çš„å‡½æ•°, å…¶å¯¹åº”çš„å®ä¹Ÿä¸æ”¯æŒ: </p>
</li>
</ul>
<p><div class="indent-block" style="margin-left: 2em !important"></p>
<pre><code class="language-julia">subset&#40;df, &#91;:a, :b&#93;&#41; # error
@subset df &#36;&#91;:a, :b&#93; # error</code></pre>
<p>æ”¯æŒå¤šåˆ—é€‰æ‹©çš„å®æœ‰:</p>
<ul>
<li><p>@select</p>
</li>
<li><p>@transform</p>
</li>
<li><p>@combine</p>
</li>
<li><p>@by</p>
</li>
</ul>
<p></div> 
</fieldset>


<fieldset class="admon admon-warn">
<legend class="admon-legend admon-legend-warn"> Warn</legend>
 <code>@orderby</code>å’Œ<code>@with</code>æ²¡æœ‰å¯¹åº”çš„<code>DataFrames.jl</code>ä¸­çš„å‡½æ•°, æ‰€ä»¥å°½é‡ä¸è¦åœ¨è¿™ä¸¤ä¸ªå®ä¸­ç”¨<code>&#36;</code>è½¬ä¹‰, ä»¥åå¾ˆæœ‰å¯èƒ½ä¼šæœ‰å˜åŠ¨ã€‚ 
</fieldset>


<fieldset class="hadmon admon-tip"><legend class="hadmon-legend admon-legend-tip"> æ€»ç»“</legend>
</p>
<ul>
<li><p>æ‰€æœ‰ä¸è¢«<code>&#36;&#40;&#41;</code>è½¬ä¹‰çš„å‚æ•°, éƒ½ä¼šè¢«å®ç”¨äºæ„å»ºåŒ¿åå‡½æ•°, ä¸”åœ¨è¿™äº›è¡¨è¾¾å¼ä¸­, åªæ”¯æŒå•åˆ—é€‰æ‹©;</p>
</li>
<li><p>è¢«<code>&#36;&#40;&#41;</code>åŒ…è£¹çš„å‚æ•°ä¼šè¢«<strong>ç›´æ¥ä¼ ç»™</strong><code>DataFrames.jl</code>ä¸­çš„å¯¹åº”å‡½æ•°, æ‰€ä»¥å¯ä»¥å…è®¸å¤šåˆ—é€‰æ‹©, åŒ…æ‹¬:</p>
<ul>
<li><p><code>&#36;&#91;:x, :y&#93;</code>, <code>&#36;&#91;&quot;x&quot;, &quot;y&quot;&#93;</code>, <code>&#36;&#91;1, 2&#93;</code></p>
</li>
<li><p>æ­£åˆ™è¡¨è¾¾å¼<code>&#36;&#40;r&quot;^a&quot;&#41;</code></p>
</li>
<li><p>è¿‡æ»¤æ–¹æ³•: <code>&#36;&#40;Not&#40;:x&#41;&#41;</code>, <code>&#36;&#40;Between&#40;:a, :z&#41;&#41;</code></p>
</li>
</ul>
</li>
<li><p><code>@with</code>, <code>@subset</code>, <code>@orderby</code>ä¸æ”¯æŒå¤šåˆ—é€‰æ‹©;</p>
</li>
<li><p>å¯ä»¥ç”¨<code>&#36;&#40;&#41;</code>åŒ…è£¹<code>src &#61;&gt; fun &#61;&gt; dest</code>è¿›è¡Œæ“ä½œ, ä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆæ“ä½œ</p>
</li>
</ul>
<p>
</fieldset>

<h4 id="ç”¨å¿½ç•¥æŠŠå¯¹åº”çš„symbolè§£ææˆåˆ—å"><a href="#ç”¨å¿½ç•¥æŠŠå¯¹åº”çš„symbolè§£ææˆåˆ—å" class="header-anchor">ç”¨<code>^</code>å¿½ç•¥æŠŠå¯¹åº”çš„<code>Symbol</code>è§£ææˆåˆ—å</a></h4>
<p>è¿™ä¸ªè§„åˆ™å¯¹æ‰€æœ‰<code>DataFramesMeta</code>ä¸­çš„å®éƒ½é€‚ç”¨ã€‚</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">df &#61;DataFrame&#40;x &#61; &#91;1, 1, 2, 2&#93;, y &#61; &#91;1, 2, 101, 102&#93;&#41;;
@select&#40;df, :x2 &#61; :x, :x3 &#61; ^&#40;:x&#41;&#41;</code></pre>
<p><div class="code-lag">julia</div></fieldset>
<h4 id="ç”¨chainå®ç®¡é“æ“ä½œ"><a href="#ç”¨chainå®ç®¡é“æ“ä½œ" class="header-anchor">ç”¨<code>@chain</code>å®ç®¡é“æ“ä½œ</a></h4>
<p><code>@chain</code>å®æ˜¯æ¥è‡ª<code>Chain.jl</code>åŒ…çš„, <code>DataFramesMeta</code>åŒ…é‡è½½äº†è¿™ä¸ªå®, è®©å…¶å¯ä»¥æ”¯æŒç®¡é“DFçš„å®æ“ä½œ:</p>
<fieldset class="code code-julia"><legend class="code-legend code-legend-julia">julia</legend></p>
<pre><code class="language-julia">using Statistics 

df &#61; DataFrame&#40;a &#61; repeat&#40;1:5, outer &#61; 20&#41;,
               b &#61; repeat&#40;&#91;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;&#93;, inner &#61; 25&#41;,
               x &#61; repeat&#40;1:20, inner &#61; 5&#41;&#41;

x_thread &#61; @chain df begin
    @transform&#40;:y &#61; 10 * :x&#41;
    @subset&#40;:a .&gt; 2&#41;
    @by&#40;:b, :meanX &#61; mean&#40;:x&#41;, :meanY &#61; mean&#40;:y&#41;&#41;
    @orderby&#40;:meanX&#41;
    @select&#40;:meanX, :meanY, :var &#61; :b&#41;
end

# Get the sum of all columns after 
# a few transformations
@chain df begin 
    @transform&#40;:y &#61; 10 .* :x&#41;
    @subset&#40;:a .&gt; 2&#41;
    @select&#40;:a, :y, :x&#41;
    reduce&#40;&#43;, eachcol&#40;_&#41;&#41;
end

# @aside å®ç”¨ä»¥ä¸´æ—¶è·³å‡ºç®¡é“, ä¹Ÿæ˜¯Chain.jlä¸­çš„
@chain df begin 
    @transform :y &#61; 10 .* :x
    @aside y_mean &#61; mean&#40;_.y&#41;
    @select :y_standardize &#61; :y .- y_mean
end</code></pre>
<p><div class="code-lag">julia</div></fieldset>


</div>
<!-- article style -->


 <hr>

<script src="https://utteranc.es/client.js"
    repo="songtaogui/blog_comments"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>


<hr> 

<div class="container">
    
    <footer class="site-footer">
        <p class="powered-by">
          <script type="text/javascript" src="//rf.revolvermaps.com/0/0/4.js?i=5jnkqismgmy&amp;m=5&amp;h=128&amp;c=baff00&amp;r=0" async="async"></script><br>
            Total visits: <span id="busuanzi_value_site_pv"></span>.<br>
            Built with <a href="https://franklinjl.org" target="_blank" rel="noopener">Franklin.jl</a> and <a
                href="https://julialang.org" target="_blank" rel="noopener">Julia</a>.<br>
            Texts are licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.<br>
            Codes are licensed under the <a href="https://mit-license.org/">MIT License</a>.<br>
            <strong>&copy; Songtao Gui</strong>. Last modified: August 04, 2023.
          </p>
    </footer>
    
</div>
</div>


</div>
<!--article container -->
</article>


<!-- CONTENT ENDS HERE -->

 <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>
 

<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js
    integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js
    integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js
    integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script>
<script src="/libs/academic/academic.min.js"></script>
<script src="/libs/pure/ui.js"></script>

</body>


 <a class="js-back-to-top back-to-top-button" href="#">
    <img src="/assets/img/up.svg" style="width: 100px;">
</a>
<!-- <button class="js-back-to-top back-to-top-button" title="BackToTop">ï¸½</button> -->
<script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
<script>
    $(function () {
        var $win = $(window);
        var $backToTop = $('.js-back-to-top');
        // å½“ç”¨æˆ·æ»šåŠ¨åˆ°ç¦»é¡¶éƒ¨100åƒç´ æ—¶ï¼Œå±•ç¤ºå›åˆ°é¡¶éƒ¨æŒ‰é’®
        $win.scroll(function () {
            if ($win.scrollTop() > 100) {
                $backToTop.show();
            } else {
                $backToTop.hide();
            }
        });
        // å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œé€šè¿‡åŠ¨ç”»æ•ˆæœè¿”å›å¤´éƒ¨
        $backToTop.click(function () {
            $('html, body').animate({
                scrollTop: 0
            }, 200);
        });
    });
</script>
<style>
    /* back to top button */
    .back-to-top-button {
        display: none;
        position: fixed;
        width: 50px;
        bottom: 3%;
        right: 3%;
        z-index: 99;
        font-size: 15px;
        border: 0px solid #696969;
        background-color: #fff;
        color: #222222;
        outline: none;
        cursor: pointer;
        padding: 7px;
        border-radius: 40px;
    }

    .back-to-top-button:hover {
        background-color: #c0dbf5;
        color: #fff;
    }
</style> 


<!-- PJAXé…ç½®: å…ˆä¸æäº†! -->
<!--   
  <script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script>
  
  <script>
    var pjax = new Pjax({
      elements: "a",
      selectors: [
        "title",
        "meta[name=description]",
        ".the-header",
        ".the-content",
        ".the-sidebar",
      ]
    })
  </script> -->

</html>



